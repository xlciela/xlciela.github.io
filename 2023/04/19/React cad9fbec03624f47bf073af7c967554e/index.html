<!DOCTYPE html><html lang="en | zh-CN | zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React 笔记 | Minamo, School at Water's Edge</title><meta name="description" content="ReactTypeScriptJSX syntaxJSX is a syntax extension for JavaScript that allows you to write HTML-like code in your JavaScript files. It allows you to write components using a familiar HTML-like syntax,"><meta name="keywords" content="React"><meta name="author" content="lain"><meta name="copyright" content="lain"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon_big.ico"><link rel="canonical" href="http://xlciela.github.io/2023/04/19/React%20cad9fbec03624f47bf073af7c967554e/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="React 笔记"><meta property="og:url" content="http://xlciela.github.io/2023/04/19/React%20cad9fbec03624f47bf073af7c967554e/"><meta property="og:site_name" content="Minamo, School at Water's Edge"><meta property="og:description" content="ReactTypeScriptJSX syntaxJSX is a syntax extension for JavaScript that allows you to write HTML-like code in your JavaScript files. It allows you to write components using a familiar HTML-like syntax,"><meta property="og:image" content="https://i.loli.net/2020/07/21/6VhnoiZTyEzO3qK.jpg"><meta property="article:published_time" content="2023-04-19T13:19:00.000Z"><meta property="article:modified_time" content="2025-04-21T23:51:30.658Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="TDL@2025" href="http://xlciela.github.io/2025/04/12/TDL-2025/"><link rel="next" title="Markdown 语法概要" href="http://xlciela.github.io/2020/07/21/Markdown%20%E8%AF%AD%E6%B3%95%E6%A6%82%E8%A6%81/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/mycustom.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">7</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> HOME</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-image"></i><span> GALLERY</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> TIMELINE</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> TAGS</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> CATEGORIES</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> LIST</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="https://bangumi.tv/user/329793/"><i class="fa-fw fas fa-youtube"></i><span> Bangumi</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://music.163.com/#/user/home?id=266477087/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://steamcommunity.com/id/xlciela/"><i class="fa-fw fab fa-steam"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> ABOUT</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React"><span class="toc-number">1.</span> <span class="toc-text">React</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TypeScript"><span class="toc-number">2.</span> <span class="toc-text">TypeScript</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JSX-syntax"><span class="toc-number">3.</span> <span class="toc-text">JSX syntax</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Component-Params"><span class="toc-number">4.</span> <span class="toc-text">Component &amp; Params</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-%E2%87%92-React-%E5%85%83%E7%B4%A0-view"><span class="toc-number">4.1.</span> <span class="toc-text">Component ⇒ React 元素 #view</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Functional-Components"><span class="toc-number">4.1.1.</span> <span class="toc-text">Functional Components</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props-vs-state"><span class="toc-number">4.1.2.</span> <span class="toc-text">props vs state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#props-children"><span class="toc-number">4.1.3.</span> <span class="toc-text">props.children</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PropsWithChildren"><span class="toc-number">4.1.4.</span> <span class="toc-text">PropsWithChildren</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#State"><span class="toc-number">4.1.5.</span> <span class="toc-text">State</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Diff-btw-React-and-Vue"><span class="toc-number">4.1.6.</span> <span class="toc-text">Diff btw React and Vue</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%8B%80%E6%85%8B%E7%AE%A1%E7%90%86-state-mgt"><span class="toc-number">5.</span> <span class="toc-text">狀態管理 state mgt</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Recoil"><span class="toc-number">5.1.</span> <span class="toc-text">Recoil</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React-useState-VS-Recoil-useRecoilState"><span class="toc-number">5.1.1.</span> <span class="toc-text">React: useState VS Recoil: useRecoilState</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Atoms"><span class="toc-number">5.2.</span> <span class="toc-text">Atoms</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Atom-Family"><span class="toc-number">5.2.1.</span> <span class="toc-text">Atom Family</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Selector-%E2%87%92-derived-state"><span class="toc-number">5.3.</span> <span class="toc-text">Selector ⇒ derived state</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E7%BE%A9-selector"><span class="toc-number">5.3.1.</span> <span class="toc-text">定義 selector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#selectorFamily-option"><span class="toc-number">5.3.2.</span> <span class="toc-text">selectorFamily(option)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hooks"><span class="toc-number">5.4.</span> <span class="toc-text">Hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#store"><span class="toc-number">5.5.</span> <span class="toc-text">store</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Q-A"><span class="toc-number">6.</span> <span class="toc-text">Q &amp; A</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Provider-Consumer"><span class="toc-number">6.0.1.</span> <span class="toc-text">Provider &amp; Consumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PregnancyRecordEdit"><span class="toc-number">6.0.2.</span> <span class="toc-text">PregnancyRecordEdit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API"><span class="toc-number">6.0.3.</span> <span class="toc-text">API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Diff-btw-and-if-statement"><span class="toc-number">6.0.4.</span> <span class="toc-text">Diff btw &amp;&amp; and if statement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Update-parent-component%E2%80%99s-state-by-event-emitting"><span class="toc-number">6.0.5.</span> <span class="toc-text">Update parent component’s state by event emitting</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#translate"><span class="toc-number">6.1.</span> <span class="toc-text">translate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Proj-memo"><span class="toc-number">6.1.1.</span> <span class="toc-text">Proj-memo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-event-control"><span class="toc-number">6.1.2.</span> <span class="toc-text">A event control</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/07/21/6VhnoiZTyEzO3qK.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Minamo, School at Water's Edge</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> HOME</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-image"></i><span> GALLERY</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> TIMELINE</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> TAGS</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> CATEGORIES</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> LIST</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="https://bangumi.tv/user/329793/"><i class="fa-fw fas fa-youtube"></i><span> Bangumi</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://music.163.com/#/user/home?id=266477087/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="https://steamcommunity.com/id/xlciela/"><i class="fa-fw fab fa-steam"></i><span> Game</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> ABOUT</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">React 笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="Created Apr 19 2023 9:19:00 pm"><i class="far fa-calendar-alt fa-fw"></i> Created Apr 19 2023</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="Updated Apr 22 2025 7:51:30 am"><i class="fas fa-history fa-fw"></i> Updated Apr 22 2025</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a><a target="_blank" rel="noopener" href="https://www.notion.so/TypeScript-3e42024aa8fe4f4dbc94f6cbdd71873e?pvs=21">TypeScript</a></h1><h1 id="JSX-syntax"><a href="#JSX-syntax" class="headerlink" title="JSX syntax"></a><strong>JSX syntax</strong></h1><p>JSX is a syntax extension for JavaScript that allows you to write HTML-like code in your JavaScript files. It allows you to write components using a familiar HTML-like syntax, which makes it easier to understand and work with. JSX code is compiled into regular JavaScript code by a transpiler, such as Babel, before being executed in the browser. This allows you to use modern ES6 syntax and features while still maintaining compatibility with older browsers. In React, you use JSX to define the structure and content of your components.</p>
<h1 id="Component-Params"><a href="#Component-Params" class="headerlink" title="Component &amp; Params"></a>Component &amp; Params</h1><p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/components-and-props.html">组件 &amp; Props – React</a></p>
<h2 id="Component-⇒-React-元素-view"><a href="#Component-⇒-React-元素-view" class="headerlink" title="Component ⇒ React 元素 #view"></a>Component ⇒ React 元素 <em>#view</em></h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function: view</span></span><br><span class="line"><span class="keyword">function</span> **<span class="title class_">Welcome</span>**(**props**) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;**props**.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// class &#123; render(): view&#125;</span></span><br><span class="line"><span class="keyword">class</span> **<span class="title class_">Welcome</span>** <span class="keyword">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;**this.props**.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Functional-Components"><a href="#Functional-Components" class="headerlink" title="Functional Components"></a><code>Functional Components</code></h3><p>無需綁定 state data 的組件， 類似於 java 中的 static class， only take props ⇒ view</p>
<p>Functional components are a type of component in React that are defined using a function instead of a class. They are simpler and easier to read and write than class components, and <strong>are preferred when you don’t need to use state or <code>lifecycle methods</code>.</strong></p>
<ul>
<li><strong><code>Lifecycle methods</code></strong><br>Lifecycle methods are special methods that are called at different points in a component’s life cycle. They allow you to perform certain actions at specific times during the component’s existence, such as when it is first created or when it is updated.<br>Some commonly used lifecycle methods in React include:<ul>
<li><code>componentDidMount</code>: This method is called after the component has been mounted (i.e. added to the DOM). It is often used to fetch data from a server or set up event listeners.</li>
<li><code>componentDidUpdate</code>: This method is called after the component has been updated (i.e. its props or state have changed). It is often used to update the DOM or perform other side effects.</li>
<li><code>componentWillUnmount</code>: This method is called just before the component is unmounted (i.e. removed from the DOM). It is often used to clean up any resources used by the component, such as event listeners or timers.</li>
<li><code>shouldComponentUpdate</code>: This method is called before the component is updated (i.e. its props or state have changed). It allows you to control whether or not the component should update, based on its current props and state. This can be useful for optimizing performance, as it allows you to prevent unnecessary re-renders.<br>There are several other lifecycle methods available in React, but these are some of the most commonly used. They allow you to perform complex actions at specific points in your component’s life cycle, making it easier to manage and maintain your code.</li>
</ul>
</li>
</ul>
<p>The main difference between functional components and class components is that functional components don’t have their own state or lifecycle methods. They <strong>are simply functions that take in props as their input and return JSX elements as their output</strong>.</p>
<p>Functional components are also more lightweight than class components, meaning they have better performance and are easier to optimize. However, they cannot be used to manage state or use lifecycle methods, which can be limiting in some cases.</p>
<p>Overall, functional components are a great choice for simple, stateless components that don’t require complex logic or lifecycle methods. If you need to manage state or use lifecycle methods, you should use a class component instead.</p>
<h3 id="props-vs-state"><a href="#props-vs-state" class="headerlink" title="props vs state"></a>props vs state</h3><blockquote>
<p><strong><code>props</code>  是 React 组件的输入</strong>。它们是从父组件向下传递给子组件的数据。</p>
<p>记住，<code>props</code>  是只读的。不应以任何方式修改它们</p>
<p><code>state</code>  和  <code>props</code>  之间最重要的区别是：<code>props</code>  由父组件传入，而  <code>state</code>  由组件本身管理。组件不能修改  <code>props</code>，但它可以修改  <code>state</code>。</p>
<p>对于所有变化数据中的每个特定部分，只应该由一个组件在其 state 中“持有”它。不要试图同步来自于两个不同组件的 state。相反，应当将其<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/lifting-state-up.html">提升</a>到最近的共同祖先组件中，并将这个 state 作为 props 传递到两个子组件。</p>
</blockquote>
<p>In React, <code>props</code> is short for “properties,” and it is <strong>an object that contains data that is passed from a parent component to its child components</strong>.</p>
<p>Props are used to <strong>transfer data and functionality</strong> from one component to another. They are read-only, meaning that child components cannot modify their own props.</p>
<p>Instead, they <strong>use props to determine how to render their own content and behavior</strong>. Props can be any type of data, including strings, numbers, objects, and functions, and they can be passed down through multiple levels of components in a component tree.</p>
<p>In React, <code>state</code> is an object that represents <strong>the internal state of a component</strong>. It is used to store and manage data that can change over time, such as user input, network requests, or the results of a computation.</p>
<p>Unlike <code>props</code>, <code>state</code> can be modified by the component itself, using the <code>setState</code> method.</p>
<p>When <code>state</code> changes, the component will re-render, updating the DOM to reflect the new state.</p>
<p><code>state</code> is initialized in the constructor of a class component, and can also be updated using lifecycle methods and other hooks in <code>functional components</code>.</p>
<p>When multiple components need to share state, it can be lifted up to a common ancestor component and passed down as <code>props</code>.</p>
<h3 id="props-children"><a href="#props-children" class="headerlink" title="props.children"></a>props.children</h3><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904036827676686">React 之不简单的 Children - 掘金</a></p>
<p>props # Map&lt;K:V&gt; : 外部(父組件)傳進來的參數</p>
<p><code>props.children</code> ⇒ <strong><code>ReactNode</code></strong>： <code>DOM| function | array | Object| jax...</code></p>
<p><a target="_blank" rel="noopener" href="https://michael18811380328.github.io/frontend/site/react/%E5%AF%B9React%20children%E7%90%86%E8%A7%A3/">对 React children 理解 - Michale An Blog</a></p>
<ul>
<li><p>React.Children.map</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">IgnoreFirstChild</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>First<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Second<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> <span class="comment">// &lt;- Only this is rendered</span></span><br><span class="line">&lt;/<span class="title class_">IgnoreFirstChild</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IgnoreFirstChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> **children** = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">children</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;this.props.children.map((child, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          // Ignore the first child</span></span><br><span class="line"><span class="language-xml">          if (index &lt; 1) return</span></span><br><span class="line"><span class="language-xml">          return child</span></span><br><span class="line"><span class="language-xml">        &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">        // 这里我们用了this.props.children.map，并且忽略到第一个元素，但是如果这里传进来的是上面</span></span><br><span class="line"><span class="language-xml">            例子是上图中的函数，这里就会报错，因为map，使用React.Children.map则不会报错</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        &#123;React.Children.map(children, (child, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">					// Ignore the first child</span></span><br><span class="line"><span class="language-xml">          if (index &lt; 1) return</span></span><br><span class="line"><span class="language-xml">          return child</span></span><br><span class="line"><span class="language-xml">        &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">      // 这里我们用了React.Children.map,这是React提供的一些帮助函数</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;L</span><br></pre></td></tr></table></figure>
</li>
<li><p>React.Children.forEach</p>
</li>
</ul>
<h3 id="PropsWithChildren"><a href="#PropsWithChildren" class="headerlink" title="PropsWithChildren"></a>PropsWithChildren</h3><p><code>PropsWithChildren</code> is a type in React that extends the <code>React.PropsWithChildren</code> interface. <strong>It is used to define a component’s props that include children as a property.</strong></p>
<p>For example, if you have a component that should be able to accept children as a property, you can define its props using <code>PropsWithChildren</code> like this:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PropsWithChildren</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line">interface <span class="title class_">MyComponentProps</span> <span class="keyword">extends</span> <span class="title class_">PropsWithChildren</span> &#123;</span><br><span class="line">  <span class="comment">// other props</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">MyComponent</span> = (<span class="params"></span></span><br><span class="line"><span class="params">	&#123; children, ...props &#125;: MyComponentProps</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// component logic</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Here, the <code>MyComponentProps</code> interface extends <code>PropsWithChildren</code>, which means that it includes the <code>children</code> property as part of the component’s props. The <code>MyComponent</code> function component then receives these props as an argument, and extracts the <code>children</code> property using destructuring.</p>
<p>Using <code>PropsWithChildren</code> can make your code more concise and clear, as it allows you to define a component’s props in a more consistent and readable way. It also allows you to easily accept children as a property, which can be useful for creating reusable components that can contain other components or elements.</p>
<p>|               |                                     |<br>| ————- | ———————————– | — | ———– |<br>| Outer ⇒ inner | <code>props: &#123;value, onClick: function&#125;</code> |<br>| inner ⇒ Outer | <code>state</code>?                            |     | recoilState |</p>
<h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/state-and-lifecycle.html">State &amp; 生命周期 – React</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 JavaScript class 中，每次你定义其子类的构造函数时，都需要调用 super 方法。因此，在所有含有构造函数的的 React 组件中，构造函数必须以 super(props) 开头。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">my</span>-component &#123;</span><br><span class="line">	<span class="comment">// bind private filed: state</span></span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">		<span class="variable language_">super</span>(props);</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">K</span>: V&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// render()</span></span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="comment">// view</span></span><br><span class="line">		<span class="comment">// get params by this.</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>state</code> is <strong>initialized</strong> in the constructor of a class component, and can also be updated using lifecycle methods and other hooks in functional components.</li>
<li>Additionally, <code>state</code> in React is only <strong>modified&#x2F;updated</strong> when <code>setState</code> is called, whereas <code>data</code> in Vue is automatically reactive and updates when it is modified.</li>
<li><code>state</code> <strong>triggers a re-render</strong> of the component when updated.</li>
<li><strong>state 提升</strong><blockquote>
<p><strong>当你遇到需要同时获取多个子组件数据，或者两个组件之间需要相互通讯的情况时，</strong></p>
<p><strong>需要把子组件的 <code>state</code> 数据提升至其共同的父组件当中保存。</strong></p>
<p><strong>之后父组件可以通过 <code>props</code> 将状态数据传递到子组件当中。这样应用当中所有组件的状态数据就能够更方便地同步共享了</strong></p>
</blockquote>
</li>
</ul>
<h3 id="Diff-btw-React-and-Vue"><a href="#Diff-btw-React-and-Vue" class="headerlink" title="Diff btw React and Vue"></a>Diff btw <code>React</code> and <code>Vue</code></h3><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7085734888011202597">vue 和 react 区别 - 掘金</a></p>
<p>React and Vue have similarities, but they also have differences. Some notable differences include:</p>
<ul>
<li><strong>Template Syntax:</strong> React uses <strong>JSX</strong>, a syntax extension for JavaScript, to define the structure and content of components, while Vue uses a <strong>template-based</strong> syntax.</li>
<li><strong>State Management:</strong><ul>
<li>React uses <strong>a unidirectional data flow</strong> and</li>
<li><strong>a single state tree</strong> managed by components,</li>
<li>while Vue uses a reactive data system with two-way data binding.<blockquote>
<p><strong>实现上，Vue 跟 React 的最大区别在于数据的 reactivity，就是反应式系统上。</strong> Vue 提供<a href="https://link.juejin.cn/?target=https://www.zhihu.com/search?q=%25E5%258F%258D%25E5%25BA%2594%25E5%25BC%258F&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%257B%2522sourceType%2522%253A%2522answer%2522%252C%2522sourceId%2522%253A1066629375%257D">反应式</a>的数据，当数据改动时，界面就会自动更新，而 React 里面需要调用方法<code>onchange()</code>&#x2F;<code>setState</code>。</p>
<ol>
<li>vue 中改动数据之后，数据本身会把这个改动 push 推送出去，告知渲染系统自动进行渲染。</li>
<li>在 React 里面，它是一个 Pull 的形式，用户要给系统一个明确的信号说明现在需要重新渲染了，这个系统才会重新渲染。</li>
</ol>
</blockquote>
</li>
</ul>
</li>
<li><strong>Size and Performance:</strong> React has a smaller core library size and faster performance due to its virtual DOM implementation, while Vue has a larger core library size and slower performance due to its template-based rendering.</li>
<li><strong>Event</strong><blockquote>
<p><strong>事件机制</strong></p>
</blockquote>
<ol>
<li>Vue 原生事件使用标准 Web 事件。Vue 组件自定义事件机制，是父子组件通信基础。vue 合理利用了 snabbdom 库的模块插件</li>
<li>React 的原生事件被包装，所有事件都冒泡到顶层 document 监听，然后在这里<a target="_blank" rel="noopener" href="https://juejin.cn/post/7066061421225705480">合成事件</a>下发。React 是基于这套可以跨端使用事件机制，而不是和 Web DOM 强绑定。React 组件上无事件，<strong>父子组件通信使用<code>props</code></strong>。<blockquote>
</blockquote>
</li>
</ol>
</li>
</ul>
<h1 id="狀態管理-state-mgt"><a href="#狀態管理-state-mgt" class="headerlink" title="狀態管理 state mgt"></a>狀態管理 state mgt</h1><p><strong>*Recoil</strong> ReactContext Redux reactQuery*</p>
<h2 id="Recoil"><a href="#Recoil" class="headerlink" title="Recoil"></a>Recoil</h2><p>when to use: component tree ≠ state structure ⇒ <strong>Recoil</strong></p>
<p><a target="_blank" rel="noopener" href="https://recoiljs.org/zh-hans/docs/introduction/core-concepts/">核心概念 | Recoil</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7006253866610229256">React 下一代状态管理库——recoil - 掘金</a></p>
<p><strong>Recoil</strong> is a <strong>state management library</strong> for React developed by Facebook. It provides a simple and flexible way to manage state in your React components, without the need for complex abstractions or boilerplate code.</p>
<p>Recoil works by defining <strong><code>atoms</code></strong> <code>原子</code><strong>, which are units of state (<em>that can be shared between components</em>)</strong>.</p>
<p>Each atom represents a single piece of state, such as a boolean value or an array.</p>
<ul>
<li><p>Here is a simple example in React that uses Recoil:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; atom, useRecoilState &#125; <span class="keyword">from</span> <span class="string">&#x27;recoil&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define an atom for the count state</span></span><br><span class="line"><span class="keyword">const</span> countState = <span class="title function_">atom</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;count&#x27;</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="number">0</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define a component that updates the count state</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useRecoilState</span>(countState);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, we first import the <code>atom</code> and <code>useRecoilState</code> hooks from the <code>recoil</code> library. We then define an atom called <code>countState</code> that represents a count value, with an initial value of 0.<br>Next, we define a <code>Counter</code> component that uses the <code>useRecoilState</code> hook to access and update the <code>countState</code> atom. The component renders the current count value and a button that increments the count when clicked.<br>The <code>useRecoilState</code> hook returns an array with two values: the current value of the atom, and a function to update the value of the atom. We use destructuring to assign these values to <code>count</code> and <code>setCount</code>, respectively.<br>When the button is clicked, the <code>handleClick</code> function is called, which calls <code>setCount</code> with the current count value plus 1. This updates the <code>countState</code> atom, which triggers a re-render of the component with the new count value.<br>Overall, this example demonstrates how Recoil can be used to manage state in a simple React component.</p>
</li>
</ul>
<h3 id="React-useState-VS-Recoil-useRecoilState"><a href="#React-useState-VS-Recoil-useRecoilState" class="headerlink" title="React: useState VS Recoil: useRecoilState"></a>React: <code>useState</code> VS Recoil: <code>useRecoilState</code></h3><p><strong><code>useState</code></strong> is a <strong>hook</strong> provided by React that allows you to <strong>define and manage local component state within a <code>functional component</code></strong>.</p>
<p><strong>Recoil</strong> is a state management library for React that provides a way to <strong>manage and share state across components</strong>.</p>
<p>It allows components to read and write to <strong>a centralized state store</strong>, and provides a set of <strong>hooks:</strong></p>
<ul>
<li>useRecoilState ⇒ [value, setValue]</li>
<li>useRecoilValue ⇒ value</li>
<li>useSetRecoilState ⇒ setValue</li>
</ul>
<p>Overall, both <code>useState</code> and Recoil are useful tools for managing state in a React application.</p>
<p><code>useState</code> is simple and easy to use for managing local component state, while Recoil provides a more powerful and flexible way to manage and share state across components.</p>
<h2 id="Atoms"><a href="#Atoms" class="headerlink" title="Atoms"></a><code>Atoms</code></h2><p><a target="_blank" rel="noopener" href="https://recoiljs.org/docs/introduction/core-concepts/">Core Concepts | Recoil</a></p>
<h3 id="Atom-Family"><a href="#Atom-Family" class="headerlink" title="Atom Family"></a><code>Atom Family</code></h3><p><a target="_blank" rel="noopener" href="https://www.picgo.net/image/atom2.X5OpzM"><img src= "/img/loading.gif" data-src="https://img.picgo.net/2025/04/22/atom2f36ba4292a6f8a76.md.png" alt="atom2"></a></p>
<h2 id="Selector-⇒-derived-state"><a href="#Selector-⇒-derived-state" class="headerlink" title="Selector ⇒ derived state"></a><code>Selector</code> ⇒ derived state</h2><blockquote>
<p>recoil 也支持“<code>派生状态</code>”，也就是说已有的原子组合成一个<code>新的状态（selector）</code>，并且新的状态也可以成为其他状态的依赖。<br>recoil 也支持异步的 selector，recoil 对 selector 的唯一要求就是他们必须是一个纯函数。</p>
<p>Recoil 的设计思想就是我们<strong>把状态拆分一个一个的原子 atom，再由 selector 派生出更多状态，最后 React 的组件树<code>component tree</code>订阅自己需要的状态</strong>，当有原子状态更新，只有改变的原子及其下游节点有订阅他们的组件才会更新。也就是说，recoil 其实构建了一个 <a href="https://link.juejin.cn/?target=https://zh.wikipedia.org/wiki/%25E6%259C%2589%25E5%2590%2591%25E6%2597%25A0%25E7%258E%25AF%25E5%259B%25BE">有向无环图</a> ，这个图和 react 组件树<strong>正交</strong>，他的状态和 react 组件树是完全 <strong>解耦</strong> 的。</p>
<p><a target="_blank" rel="noopener" href="https://www.picgo.net/image/atom1.X5OxOc"><img src= "/img/loading.gif" data-src="https://img.picgo.net/2025/04/22/atom11ff80f52abc0017b.md.png" alt="atom1"></a></p>
</blockquote>
<h3 id="定義-selector"><a href="#定義-selector" class="headerlink" title="定義 selector"></a>定義 selector</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fontSizeLabelState = <span class="title function_">selector</span>(&#123;</span><br><span class="line">  **key**: <span class="string">&#x27;fontSizeLabelState&#x27;</span>,</span><br><span class="line">	<span class="comment">// get 属性是用于计算的函数。它可以使用名为 get 的入参来**访问 atom 以及其他 selector 的值**。每当它访问另一个 atom 或 selector 时，就会创建相应的依赖关系，以便在更新另一个 atom 或 selector 时，该 atom 或 selector 也会被重新计算。</span></span><br><span class="line">  **get**: <span class="function">(<span class="params">&#123;**get**&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fontSize = <span class="title function_">get</span>(fontSizeState); <span class="comment">// fontSizeState: Atom</span></span><br><span class="line">    <span class="keyword">const</span> unit = <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;fontSize&#125;</span><span class="subst">$&#123;unit&#125;</span>`</span>; <span class="comment">// eg: =&gt; 14px</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>key</li>
<li>get ⇒ Promise<T> | RecoilValue<T> | Loadable<T> | WrappedValue<T> | T<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// source code</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ReadOnlySelectorOptions</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">key</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">get</span>: <span class="function">(<span class="params"><span class="attr">opts</span>: &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">      **get**: GetRecoilValue, //一个用来从其他 atom 或 selector 获取值的函数。所有传入该函数的 atom 或 selector 将会隐式地被添加到此 selector 的一个 依赖 列表中。如果这个 selector 的任何一个依赖发生改变，这个 selector 就会重新计算值。</span></span></span><br><span class="line"><span class="params"><span class="function">      getCallback: GetCallback,</span></span></span><br><span class="line"><span class="params"><span class="function">    &#125;</span>) =&gt;</span> <span class="title class_">Promise</span>&lt;T&gt; | <span class="title class_">RecoilValue</span>&lt;T&gt; | <span class="title class_">Loadable</span>&lt;T&gt; | <span class="title class_">WrappedValue</span>&lt;T&gt; | T;</span><br><span class="line">    <span class="attr">dangerouslyAllowMutability</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">cachePolicy_UNSTABLE</span>?: <span class="title class_">CachePolicyWithoutEquality</span>; <span class="comment">// <span class="doctag">TODO:</span> using the more restrictive CachePolicyWithoutEquality while we discuss long term API</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
<li>set? ⇒ 一个  <strong>可写</strong>的 derived state</li>
</ul>
<h3 id="selectorFamily-option"><a href="#selectorFamily-option" class="headerlink" title="selectorFamily(option)"></a><code>selectorFamily(option)</code></h3><ul>
<li>In Recoil, <code>selector</code> and <code>selectorFamily</code> are both used to derive state from existing atoms. However, <code>selectorFamily</code> is a more flexible version of <code>selector</code> that allows you to define a family of related selectors, each with its <strong>own unique key</strong> and set of parameters.<br><code>selector</code> takes a single <code>key</code> and a <code>get</code> function, and returns a new selector that can be used to derive new state from existing atoms. The <code>get</code> function takes an object with a <code>get</code> method that can be used to access the values of other atoms or selectors.</li>
<li><code>selectorFamily</code>, on the other hand, takes an <code>options</code> object that includes a <code>key</code> and a <code>get</code> function, as well as a <code>cachePolicy</code> and a <code>shouldRecoilUpdate</code> function.<ul>
<li>The <code>key</code> is used to uniquely identify the selector,</li>
<li><strong>the <code>get</code> function takes a <code>params</code> object that can be used to provide dynamic values for the selector</strong>.</li>
</ul>
</li>
</ul>
<p>By using <code>selectorFamily</code>, you can define a family of related selectors that can be used <strong>to derive state based on different sets of parameters</strong>. This can be useful for creating more complex and dynamic applications that require more flexibility in their state management.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; selectorFamily &#125; <span class="keyword">from</span> <span class="string">&#x27;recoil&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; targetAtom &#125; <span class="keyword">from</span> <span class="string">&#x27;./atoms&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> targetSelector = <span class="title function_">selectorFamily</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;targetSelector&#x27;</span>,</span><br><span class="line">	<span class="comment">// where the difference comes</span></span><br><span class="line">  **get**: **(<span class="attr">childId</span>: <span class="built_in">number</span>)** =&gt; <span class="title function_">async</span> (&#123; get &#125;) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> target = <span class="title function_">get</span>(targetAtom);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!target) &#123;</span><br><span class="line">      <span class="keyword">const</span> **reqBody = &#123; childId &#125;**;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">put</span>(<span class="string">&#x27;/api/target&#x27;</span>, reqBody);</span><br><span class="line">      <span class="keyword">return</span> res.<span class="property">data</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this updated example, we define a <code>targetSelector</code> using <code>selectorFamily</code>. The <code>key</code> is the same as before, but <strong>now we also define a <code>get</code> function that takes a <code>childId</code> parameter.</strong></p>
<p>The <code>get</code> function returns an async function that takes a <code>get</code> parameter. This function first gets the value of the <code>targetAtom</code> atom using <code>get</code>. If <code>targetAtom</code> is not defined, the function sends a <code>PUT</code> request to <code>/api/target</code> with a request body of <code>&#123;childId &#125;</code>. The response data is then returned as the value of the <code>targetSelector</code>. If <code>targetAtom</code> is defined, its value is returned as the value of the <code>targetSelector</code>.</p>
<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><ul>
<li>demo<table>
<thead>
<tr>
<th></th>
<th>useRecoilState(atom)⇒ [theAtom: Atom, setTheAtom: f]</th>
<th>useRecoilValue(atom</th>
<th>selector) ⇒ theSelector: Selector</th>
</tr>
</thead>
<tbody><tr>
<td>do what</td>
<td>to read&#x2F; write the atom that shared by components within a functional component</td>
<td>to only read the atom</td>
<td>selector that shared by components within a functional component</td>
</tr>
<tr>
<td>example</td>
<td>function FontButton() {</td>
<td></td>
<td></td>
</tr>
<tr>
<td>const [fontSize, setFontSize] &#x3D; useRecoilState(<strong>fontSizeState</strong>); &#x2F;&#x2F; Atom</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>return (</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;button onClick&#x3D;{() &#x3D;&gt; setFontSize((size) &#x3D;&gt; size + 1)} style&#x3D;&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Click to Enlarge</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></button></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>);</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td>function FontButton() {</td>
<td></td>
<td></td>
</tr>
<tr>
<td>const [fontSize, setFontSize] &#x3D; useRecoilState(<strong>fontSizeState</strong>);</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>const fontSizeLabel &#x3D; useRecoilValue(<strong>fontSizeLabelState</strong>);&#x2F;&#x2F; selector</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>return (</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><div>Current font size: {fontSizeLabel}</div></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;button onClick&#x3D;{() &#x3D;&gt; setFontSize(fontSize + 1)} style&#x3D;&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Click to Enlarge</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></button></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;&#x2F;&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>);</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>}</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-reference.html#functional-updates">Hook API 索引 – React</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7075701341997236261">React Hooks 的原理，有的简单有的不简单 - 掘金</a></p>
<p>React Hooks are a relatively new feature in React that <strong>allow you to use state and other React features in functional components</strong>. Here are some of the most commonly used hooks:</p>
<ul>
<li><strong><code>useState</code>:</strong> This hook allows you to <strong>add state</strong> to your <code>functional components</code>.<br>You can use it to <strong>store and update values</strong> that affect your component’s behavior and rendering.</li>
<li><strong><code>useRecoilState</code></strong></li>
<li><strong><code>useEffect(effect: f, deps?: []| undefined):void</code>:</strong> This hook allows you to <strong>perform side effects in your</strong> <code>functional components</code>, You can use it to manage the lifecycle of your component and ensure that it behaves correctly. side effects include:<ul>
<li><strong>fetching data</strong></li>
<li><strong>reading&#x2F; writing to local storage</strong></li>
<li><strong>updating the DOM</strong></li>
<li>setting up subscription</li>
<li>setting up event listeners</li>
</ul>
</li>
<li><strong>When <code>useEffect</code> is run?</strong><blockquote>
<p>A component has four stages:</p>
<p><strong>Mounting -&gt; First Render -&gt; Re-rendering -&gt; Unmount</strong></p>
<p>A component <strong>re-renders</strong> if any of its <strong>state changes</strong>.</p>
<p><code>useEffect</code> of a specific component is run on the first render and subsequent re-rendering.</p>
<p>Sometimes we do not want <code>useEffect</code> to run on every render. For example if an API is called inside <code>useEffect</code> , on re-render this API will be called again, this will lead to overload in the server. In such cases we use <strong>dependency array.</strong> A dependency array is the second argument to <code>useEffect</code> .</p>
<p><code>useEffect(()=&gt;&#123;console.log(&#39;xyz&#39;)&#125;)</code></p>
<p>Here we did not pass second argument , so it will <strong>run on every render</strong>.</p>
<p><code>useEffect(()=&gt;&#123;console.log(&#39;xyz&#39;)&#125;,[])</code></p>
<p>Here we passed dependency array empty, this useEffect will <strong>run only on first render.</strong></p>
<p><code>useEffect(()=&gt;&#123;console.log(&#39;xyz&#39;)&#125;,[xyz])</code></p>
<p><strong>This <code>useEffect</code> will run on the first render and it will also run on re-rendering if there is a change in xyz compared to the last render.</strong></p>
</blockquote>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Importing useRecoil from custom store</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRecoil &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/PregnancyDentalCheckupState&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Custom hook to handle pregnancy dental checkup</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">usePregnancyDentalCheckup</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// Destructure pregnancyDentalCheckup, setPregnancyDentalCheckup and res from the useRecoil hook</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pregnancyDentalCheckup, setPregnancyDentalCheckup, res &#125; = **<span class="title function_">useRecoil</span>()**</span><br><span class="line"></span><br><span class="line">	**<span class="comment">// side effect of this functional component**</span></span><br><span class="line">  <span class="comment">// useEffect hook to set pregnancyDentalCheckup</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setPregnancyDentalCheckup</span>(res)</span><br><span class="line">  &#125;, [res, setPregnancyDentalCheckup])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Return pregnancyDentalCheckup</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">pregnancyDentalCheckup</span>: pregnancyDentalCheckup,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The <strong><code>useEffect</code></strong> hook is used to manage side-effects in a functional React component. In this case, it is used to set the <code>pregnancyDentalCheckup</code> state variable using the <code>setPregnancyDentalCheckup</code> method from the custom <code>useRecoil</code> hook, whenever the value of <code>res</code> or <code>setPregnancyDentalCheckup</code> changes.</p>
<h2 id="store"><a href="#store" class="headerlink" title="store"></a><strong>store</strong></h2><p>In React, a <strong>store</strong> is a centralized location for managing state that is shared between multiple components. It allows you to manage complex state in a more organized and efficient way, and can help you avoid problems such as prop drilling and state duplication.</p>
<p>A store can be implemented in many ways, including using</p>
<ul>
<li>React Context,</li>
<li>Redux, or</li>
<li>other state management libraries.</li>
</ul>
<p>In the provided code, a custom store is used to manage state related to pregnancy dental checkups. The <code>useRecoil</code> hook is used to access the <code>pregnancyDentalCheckup</code> state variable and the <code>setPregnancyDentalCheckup</code> method that updates it. The <code>useEffect</code> hook is used to set the <code>pregnancyDentalCheckup</code> state variable whenever the value of <code>res</code> or <code>setPregnancyDentalCheckup</code> changes.</p>
<p>The <code>usePregnancyDentalCheckup</code> hook returns an object with <code>pregnancyDentalCheckup</code> as its key, and its value set to the <code>pregnancyDentalCheckup</code> variable. This value can then be used by any component that uses this hook.</p>
<p>Overall, this custom hook is an example of how to use <code>useEffect</code> and a custom hook to manage state and side-effects in React components. It also demonstrates how to create reusable code with custom hooks in React.</p>
<ul>
<li><strong>useContext:</strong> This hook allows you to access the context of your parent components. You can use it to share data and functionality between components without having to pass props down the component tree.</li>
<li><strong>useReducer:</strong> This hook allows you to manage state using a reducer function, similar to how you would in a Redux store. You can use it to manage more complex state and actions in your component.</li>
<li><strong>useCallback:</strong> This hook allows you to memoize a function, which can improve the performance of your component by preventing unnecessary re-renders.</li>
<li><strong>useMemo:</strong> This hook allows you to memoize a value, which can improve the performance of your component by preventing unnecessary re-calculations.</li>
<li><strong>useRef:</strong> This hook allows you to create a mutable reference to an element or value in your component. You can use it to access and manipulate DOM elements or track the previous value of a prop or state value.</li>
</ul>
<p>By using React Hooks, you can simplify your code and make it easier to understand and maintain. They also allow you to use state and other React features in functional components, which can make your code more modular and reusable.</p>
<h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h1><h3 id="Provider-Consumer"><a href="#Provider-Consumer" class="headerlink" title="Provider &amp; Consumer"></a>Provider &amp; Consumer</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/feda60469135">React 的 Provider、Consumer 的使用</a></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">PregnancyRecordEdit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// hooksの呼び出し</span></span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>() <span class="comment">// 用于获取当前语言环境下的文本</span></span><br><span class="line">  <span class="keyword">const</span> viewText =</span><br><span class="line">    text.<span class="property">pages</span>.<span class="property">PregnancyRecord</span>.<span class="property">PregnancyPersonalData</span>.<span class="property">CreatePregnancyRecord</span></span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>() <span class="comment">// 用于导航到其他页面</span></span><br><span class="line">  <span class="keyword">const</span> &#123; setResultMessage &#125; = <span class="title function_">useResultMessage</span>() <span class="comment">// 用于更新全局提示信息</span></span><br><span class="line">  <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useLocation</span>() <span class="comment">// 用于获取当前 URL 的信息</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [periodDivision, setPeriodDivision] = <span class="title function_">useState</span>(<span class="number">0</span>) <span class="comment">// 存储周期分期</span></span><br><span class="line">  <span class="keyword">const</span> [childbirthDate, setChildbirthDate] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 存储分娩日期</span></span><br><span class="line">  <span class="keyword">const</span> [startDate, setStartDate] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 存储开始日期</span></span><br><span class="line">  <span class="keyword">const</span> [endDate, setEndDate] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 存储结束日期</span></span><br><span class="line">  <span class="keyword">const</span> [freeComment, setFreeComment] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 存储自由评论</span></span><br><span class="line">  <span class="keyword">const</span> [freeCommentValidation, setFreeCommentValidation] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// test</span></span><br><span class="line">  <span class="keyword">const</span> childId = <span class="string">&#x27;test01&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pregnancyPersonalData &#125; = **<span class="title function_">usePregnancyPersonalData</span>(&#123;childId, <span class="attr">periodDivision</span>: <span class="number">0</span>&#125;)** <span class="comment">// 获取孕产数据</span></span><br><span class="line">  <span class="keyword">const</span> record = pregnancyPersonalData &amp;&amp; pregnancyPersonalData[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">NowDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    <span class="keyword">const</span> formatContent = <span class="string">&#x27;yyyy/MM/dd&#x27;</span></span><br><span class="line">    <span class="title function_">setPeriodDivision</span>(record?.<span class="property">periodDivision</span> || <span class="number">0</span>)</span><br><span class="line">    <span class="title function_">setChildbirthDate</span>(record?.<span class="property">childbirthDate</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setStartDate</span>(record?.<span class="property">startDate</span> || <span class="title function_">format</span>(<span class="title class_">NowDate</span>, formatContent))</span><br><span class="line">    <span class="title function_">setEndDate</span>(record?.<span class="property">endDate</span> || <span class="title function_">format</span>(<span class="title class_">NowDate</span>, formatContent))</span><br><span class="line">    <span class="title function_">setFreeComment</span>(record?.<span class="property">freeComment</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;, [record])</span><br></pre></td></tr></table></figure>

<p>In this specific case, the expression <code>pregnancyPersonalData &amp;&amp; pregnancyPersonalData[0]</code> is used to check if <code>pregnancyPersonalData</code> is not <code>null</code> or <code>undefined</code> before accessing its first element <code>pregnancyPersonalData[0]</code>. If <code>pregnancyPersonalData</code> is <code>null</code> or <code>undefined</code>, the expression will return <code>null</code> without throwing an error.</p>
<h3 id="PregnancyRecordEdit"><a href="#PregnancyRecordEdit" class="headerlink" title="PregnancyRecordEdit"></a>PregnancyRecordEdit</h3><p>组件函数 <code>PregnancyRecordEdit</code> 用于编辑怀孕记录。这里介绍了使用的 hooks 和相关的 state 变量：</p>
<ul>
<li><code>useLocale</code> hook 用于获取当前语言环境下的文本</li>
<li><code>useNavigate</code> hook 用于导航到其他页面</li>
<li><code>useResultMessage</code> hook 用于更新全局提示信息</li>
<li><code>useLocation</code> hook 用于获取当前 URL 的信息</li>
<li><code>useState</code> hook 用于定义多个 state 变量</li>
<li><code>useEffect</code> hook 用于在组件渲染后更新 state 变量</li>
<li><strong><code>usePregnancyPersonalData</code> hook 用于获取孕产数据</strong></li>
<li><strong><code>useRecoilState</code> hook 用于获取和更新 Recoil 状态</strong></li>
</ul>
<p>在此组件中，<code>usePregnancyPersonalData</code> 和 <code>useRecoilState</code> hooks 都是自定义的。<code>usePregnancyPersonalData</code> hook 用于获取孕产数据，而 <code>useRecoilState</code> hook 用于获取和更新 Recoil 状态。这两个 hooks 是通过使用 <code>useEffect</code> 和 <code>useRecoilState</code> hooks 来管理状态和副作用的方式实现的。</p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">insertOrUpdateOrPregnancyWeightChange</span> = <span class="keyword">async</span> (<span class="params"><span class="attr">reqBody</span>: &#123;</span></span><br><span class="line"><span class="params">  childId: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">  date: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">  bodyWeight: <span class="built_in">string</span> | <span class="built_in">number</span></span></span><br><span class="line"><span class="params">&#125;</span>) =&gt;</span><br><span class="line">  request</span><br><span class="line">    .<span class="property">put</span>**<span class="language-xml">&lt;PregnancyWeightChange[]&gt;**(</span></span><br><span class="line"><span class="language-xml">      &#x27;/pregnancy-weight-change/register-update&#x27;,</span></span><br><span class="line"><span class="language-xml">      reqBody</span></span><br><span class="line"><span class="language-xml">    )</span></span><br><span class="line"><span class="language-xml">    .then((res) =&gt; res.code)</span></span><br><span class="line"><span class="language-xml">    .catch((err) =&gt; err.status)</span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>

<p>这段代码定义了一个名为 <code>insertOrUpdateOrPregnancyWeightChange</code> 的异步函数，该函数用于向服务器发送请求来注册或更新孕妇的体重变化数据。该函数接受一个对象作为参数，其中包含 <code>childId</code>（孩子的 ID）、<code>date</code>（变化日期）和 <code>bodyWeight</code>（孕妇体重）属性。该函数使用了一个名为 <code>request</code> 的库来发送 <code>PUT</code> 请求，并返回一个 Promise 对象。如果请求成功，该函数将返回服务器响应中的 <code>code</code> 属性；如果请求失败，该函数将返回服务器响应中的 <code>status</code> 属性。</p>
<p>The “<strong><code>&lt;PregnancyWeightChange[]&gt;</code></strong>“ after the <code>.put</code> is a type parameter that <strong>specifies the expected response type from the server</strong>. In this case, it is an array of objects representing changes in a pregnant woman’s weight over time. The function is expecting the server to return an array of these objects, and will throw an error if the response does not match this type. This helps ensure that the response data is properly formatted and can be used by the application without errors.</p>
<ul>
<li><p><strong>Optional chaining</strong> <code>?.</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClickIcon</span> = (<span class="params">id?: string</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> record = postPartumCondition**?.**<span class="title function_">find</span>(</span><br><span class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;item.postPartumMonths&#125;</span>,<span class="subst">$&#123;item.postPartumDays&#125;</span>`</span> === id</span><br><span class="line">    )</span><br><span class="line">		<span class="comment">// id as param passed to next page</span></span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">`/record/produceMotherStatusDetail`</span>, &#123;</span><br><span class="line">      <span class="attr">state</span>: &#123; record &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>The “?.” is called the <strong>optional chaining operator</strong>. It allows you to safely access properties of an object <strong>without worrying about whether or not they exist</strong>. In the example code, the <code>postPartumCondition</code> object is checked to see if it exists, and if so, the <code>find</code> method is called on it. Without the optional chaining operator, if <code>postPartumCondition</code> did not exist, an error would be thrown when trying to call <code>find</code> on it. With the optional chaining operator, <strong>if <code>postPartumCondition</code> is undefined, <code>handleClickIcon</code> will return undefined without throwing an error.</strong></p>
</li>
<li><p><strong>nullish coalescing operator</strong> <code>??</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childId = <span class="string">&#x27;test01&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pregnancyWeightChange, setPregnancyWeightChange &#125; = <span class="title function_">useRecoil</span>(&#123;</span><br><span class="line">    childId,</span><br><span class="line">    <span class="attr">date</span>: date ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>The <code>??</code> is known as the <strong>nullish coalescing operator</strong>. It is used to check if a value is <code>null</code> or <code>undefined</code>, and if so, it returns a default value. In the provided code, if <code>date</code> is <code>null</code> or <code>undefined</code>, it will be replaced with an empty string (<code>&#39;&#39;</code>).</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [periodDivision, setPeriodDivision] = <span class="title function_">useState</span>(state?.<span class="property">id</span> ?? <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>In the code block, <code>state?.id ?? 0</code> is a shorthand for checking if <code>state</code> is not <code>null</code> or <code>undefined</code>, and if it is, defaulting to <code>0</code>.<br>The <code>?.</code> (optional chaining) operator checks if <code>state</code> is truthy, and if it is, accesses its <code>id</code> property. If <code>state</code> is falsy, the expression to the right of <code>??</code> (nullish coalescing) is evaluated, which in this case is <code>0</code>.</p>
</li>
<li><p><strong><code>navigate(’targetURL’, state: &#123; record &#125;)</code></strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleToPregnancyRecordEdit</span> = (<span class="params">row: string | <span class="literal">undefined</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> record = pregnancyPersonalData?.<span class="title function_">find</span>(</span><br><span class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">periodDivision</span> === <span class="built_in">parseInt</span>(row ? row : <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> (record) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(record)</span><br><span class="line">      <span class="comment">// pass the record as a state-parameter to the detailPage</span></span><br><span class="line">      <span class="title function_">navigate</span>(<span class="string">&#x27;/record/momSelfRecordDetail&#x27;</span>, &#123; <span class="attr">state</span>: &#123; record &#125; &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">&#x27;/record/momSelfRecordEdit&#x27;</span>, &#123;<span class="attr">state</span>: &#123;<span class="attr">id</span>: <span class="built_in">parseInt</span>(row? <span class="attr">row</span>: <span class="string">&#x27;0&#x27;</span>)&#125;&#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>The <code>navigate()</code> function is used to navigate to a different page in the application. In this case, it is used to navigate to either “&#x2F;record&#x2F;momSelfRecordDetail” or “&#x2F;record&#x2F;momSelfRecordEdit” depending on the condition.<br>The <code>state</code> parameter is an optional parameter that allows you to pass state data to the new page being navigated to. Here, the <code>state</code> parameter is being used to pass the <code>record</code> object or <code>id</code> value as state data to the new page so that it can be accessed by the receiving component.<br>In the case of “&#x2F;record&#x2F;momSelfRecordDetail”, the entire <code>record</code> object is being passed as state data. In the case of “&#x2F;record&#x2F;momSelfRecordEdit”, only the <code>id</code> value is being passed as state data.<br>This state data can then be accessed by the receiving component using the <code>props.location.state</code> object.</p>
</li>
<li><p><code>useState</code> via React VS <code>useRecoilState</code> via Recoil AND <code>useEffect</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">PostPartumConditionEdit</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useLocation</span>()</span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>()</span><br><span class="line">  <span class="keyword">const</span> viewText = text.<span class="property">pages</span>.<span class="property">PostPartumCondition</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">TipsText</span> = text.<span class="property">components</span>.<span class="property">message</span>.<span class="property">labels</span></span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line">  <span class="keyword">const</span> childId = <span class="string">&#x27;test01&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> &#123; postPartumCondition, setPostPartumCondition &#125; =</span><br><span class="line">    <span class="title function_">usePostPartumCondition</span>(&#123;</span><br><span class="line">      <span class="attr">childId</span>: childId,</span><br><span class="line">      <span class="attr">postPartumMonths</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">postPartumDays</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// **define and initialize state variables Hook@useState**</span></span><br><span class="line">  <span class="keyword">const</span> [revivalUterus, setRevivalUterus] = <span class="title function_">useState</span>(<span class="title class_">Condition</span>.<span class="property">OK</span>)</span><br><span class="line">  <span class="keyword">const</span> [lochia, setLochia] = <span class="title function_">useState</span>(<span class="title class_">LochiaCondition</span>.<span class="property">OK</span>)</span><br><span class="line">  <span class="keyword">const</span> [urineProtein, setUrineProtein] = <span class="title function_">useState</span>(<span class="title class_">UrineProtein</span>.<span class="property">Sub</span>)</span><br><span class="line">  <span class="keyword">const</span> [urineSugar, setUrineSugar] = <span class="title function_">useState</span>(<span class="title class_">UrineSugar</span>.<span class="property">Sub</span>)</span><br><span class="line">  <span class="keyword">const</span> [bodyWeight, setBodyWeight] = useState&lt;<span class="built_in">number</span> | <span class="built_in">string</span>&gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [remarks, setRemarks] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [month, setMonth] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [day, setDay] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [breastStatus, setBreastStatus] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [bloodPressureTextUp, setBloodPressureTextUp] = useState&lt;</span><br><span class="line">    <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line">  &gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [bloodPressureTextDown, setBloodPressureTextDown] = useState&lt;</span><br><span class="line">    <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line">  &gt;(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; setResultMessage &#125; = <span class="title function_">useResultMessage</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123;record&#125; = state</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [inputValidation, setInputValidation] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">const</span> [bloodPressureValidationTop, setBloodPressureValidationTop] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">const</span> [bloodPressureValidationBottom, setBloodPressureValidationBottom] =</span><br><span class="line">    <span class="title function_">useState</span>(<span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [motherWeightValidation, setMotherWeightValidation] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">const</span> [remarkAreaValidation, setRemarkAreaValidation] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [dayValidation, setDayValidation] = <span class="title function_">useState</span>(<span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span>)</span><br><span class="line">  <span class="keyword">const</span> [monthValidation, setMonthValidation] = <span class="title function_">useState</span>(</span><br><span class="line">    <span class="title class_">ValidateUtil</span>.<span class="property">emptyNoError</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">	<span class="comment">// **to update the component&#x27;s local state variables based on dependencies&#x27; change**</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setMonth</span>(state &amp;&amp; state.<span class="property">postPartumMonths</span>)</span><br><span class="line">    <span class="title function_">setDay</span>(state &amp;&amp; state.<span class="property">postPartumDays</span>)</span><br><span class="line">    <span class="title function_">setRevivalUterus</span>(record?.<span class="property">revivalUterus</span> || <span class="title class_">Condition</span>.<span class="property">OK</span>)</span><br><span class="line">    <span class="title function_">setLochia</span>(record?.<span class="property">lochia</span> || <span class="title class_">LochiaCondition</span>.<span class="property">OK</span>)</span><br><span class="line">    <span class="title function_">setMonth</span>(record?.<span class="property">postPartumMonths</span>.<span class="title function_">toString</span>() || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setDay</span>(record?.<span class="property">postPartumDays</span>.<span class="title function_">toString</span>() || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setBreastStatus</span>(record?.<span class="property">breastStatus</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setBloodPressureTextUp</span>(record?.<span class="property">bloodPressureTop</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setBloodPressureTextDown</span>(record?.<span class="property">bloodPressureBottom</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setUrineProtein</span>(record?.<span class="property">urineProtein</span> || <span class="title class_">UrineProtein</span>.<span class="property">Sub</span>)</span><br><span class="line">    <span class="title function_">setUrineSugar</span>(record?.<span class="property">urineSugar</span> || <span class="title class_">UrineSugar</span>.<span class="property">Sub</span>)</span><br><span class="line">    <span class="title function_">setBodyWeight</span>(record?.<span class="property">bodyWeight</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">setRemarks</span>(record?.<span class="property">note</span> || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;, **[postPartumCondition, state, record]**)</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClickRevivalUterus</span> = (<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setRevivalUterus</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span> () <span class="comment">// =&gt; VIEW</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If the record is passed in by the <code>react navigate()</code> function rather than as a prop, you can modify the code as follows:<br>To initialize each of the fields in <code>defaultRecord</code> using the <code>useState</code> hook, here’s the updated code:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// define functional component&#x27;s **local** state **[field, setters]** by useState provided with React</span></span><br><span class="line"><span class="keyword">const</span> [revivalUterus, setRevivalUterus] = <span class="title function_">useState</span>(<span class="title class_">Condition</span>.<span class="property">OK</span>);</span><br><span class="line"><span class="keyword">const</span> [lochia, setLochia] = <span class="title function_">useState</span>(<span class="title class_">LochiaCondition</span>.<span class="property">OK</span>);</span><br><span class="line"><span class="keyword">const</span> [urineProtein, setUrineProtein] = <span class="title function_">useState</span>(<span class="title class_">UrineProtein</span>.<span class="property">Sub</span>);</span><br><span class="line"><span class="keyword">const</span> [urineSugar, setUrineSugar] = <span class="title function_">useState</span>(<span class="title class_">UrineSugar</span>.<span class="property">Sub</span>);</span><br><span class="line"><span class="keyword">const</span> [bodyWeight, setBodyWeight] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [remarks, setRemarks] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [month, setMonth] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [day, setDay] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [breastStatus, setBreastStatus] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [bloodPressureTextUp, setBloodPressureTextUp] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [bloodPressureTextDown, setBloodPressureTextDown] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// receive the record passed by navigate() from outer scope</span></span><br><span class="line"><span class="keyword">const</span> &#123;record&#125; = state</span><br><span class="line"></span><br><span class="line"><span class="comment">// udpate the fields whenever the the dependencies change by useEffect hook</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (record) &#123;</span><br><span class="line">      <span class="comment">// invoke setters to update the fields</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//setPeriodDivision(record?.periodDivision || 0)</span></span><br><span class="line">  &#125;, [record])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This React code uses the <code>useState</code> and <code>useEffect</code> hooks.<br><code>useState</code> is used to manage component state. In this code, it is used <strong>to define and initialize state variables</strong> for managing the <code>revivalUterus</code>, <code>lochia</code>, <code>urineProtein</code>, <code>urineSugar</code>, <code>bodyWeight</code>, <code>remarks</code>, <code>month</code>, <code>day</code>, <code>breastStatus</code>, <code>bloodPressureTextUp</code>, and <code>bloodPressureTextDown</code> values.<br>The variable created by <code>useState</code> is <strong>stored in the component’s local state</strong>. It can be accessed and updated using the state variable and the corresponding setter function returned by the <code>useState</code> hook.<br>Yes, state can be accessed by other components if it is passed down as a prop. However, if state is only used within a single component, it is generally better to keep it local to that component rather than passing it down as a prop. This can help keep the component tree more organized and reduce the risk of prop drilling. If you need to share state between multiple components, you can use a state management library such as Redux or React Context. These libraries allow you to store state in a centralized location that can be accessed by any component in the application.</p>
<hr>
<p><strong><code>useEffect</code></strong> is used to run side effects when certain dependencies change. In this code, it is used <strong>to update the component’s state variables based on changes to the <code>postPartumCondition</code>, <code>state</code>, and <code>record</code> values.</strong><br>Yes, <strong><code>useEffect</code> is invoked after the component has been rendered.</strong> It is a hook that allows you to perform side effects in your component such as</p>
<ul>
<li>fetching data from an API,</li>
<li>updating the DOM, or</li>
<li>subscribing to events.<br>note that <code>useEffect</code> runs <strong>asynchronously</strong>, which means that <strong>any state updates it triggers will not be visible until after the component has re-rendered</strong>.<br>The <code>handleClickRevivalUterus</code> function is defined to update the <code>revivalUterus</code> state variable when an event is triggered.<br>Overall, the <code>useState</code> and <code>useEffect</code> hooks are used to manage component state and handle updates to that state based on changes to dependencies.</li>
</ul>
</li>
<li><p>props</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">SignInOnTheDayOfDiagnosis</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  **props**: <span class="title class_">SignInOnTheDayOfDiagnosisProps</span> <span class="comment">// 组件接受的props</span></span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">	**<span class="comment">// extract the fields from the props**</span></span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    periodDivision, <span class="comment">// 周期划分</span></span><br><span class="line">    childbirthDate, <span class="comment">// 出生日期</span></span><br><span class="line">    startDate, <span class="comment">// 开始日期</span></span><br><span class="line">    endDate, <span class="comment">// 结束日期</span></span><br><span class="line">    freeComment, <span class="comment">// 自由评论</span></span><br><span class="line">    setStartDate, <span class="comment">// 设置开始日期方法</span></span><br><span class="line">    setEndDate, <span class="comment">// 设置结束日期方法</span></span><br><span class="line">    setChildbirthDate, <span class="comment">// 设置出生日期方法</span></span><br><span class="line">    setFreeComment, <span class="comment">// 设置自由评论方法</span></span><br><span class="line">    freeCommentValidation, <span class="comment">// 自由评论验证</span></span><br><span class="line">    setFreeCommentValidation, <span class="comment">// 设置自由评论验证</span></span><br><span class="line">  &#125; = props</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>() <span class="comment">// 获取本地化文本</span></span><br><span class="line">  <span class="keyword">const</span> viewText = text.<span class="property">pages</span>.<span class="property">PregnancyRecord</span>.<span class="property">PregnancyPersonalData</span>.<span class="property">CreatePregnancyRecord</span> <span class="comment">// 获取对应文本</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handelChildbirthDateSelected</span> = (<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    setChildbirthDate &amp;&amp; <span class="title function_">setChildbirthDate</span>(value) <span class="comment">// 处理出生日期选择事件</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 根据参数返回对应组件</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">GetDisplayComponents</span> = (<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">periodDivision</span>: <span class="built_in">number</span>, <span class="comment">// 周期划分</span></span></span><br><span class="line"><span class="params">    <span class="attr">birthDayValue</span>: <span class="built_in">string</span>, <span class="comment">// 出生日期值</span></span></span><br><span class="line"><span class="params">    <span class="attr">diagnosisDay</span>: &#123;</span></span><br><span class="line"><span class="params">      startDay: <span class="built_in">string</span> // 开始日期</span></span><br><span class="line"><span class="params">      endDay: <span class="built_in">string</span> // 结束日期</span></span><br><span class="line"><span class="params">    &#125;</span></span><br><span class="line"><span class="params">  </span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (**periodDivision**) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">9</span>: <span class="comment">// 周期划分为9</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">DiagnosisDateForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">mode</span>=<span class="string">&#123;DiagnosisDateFormStyle.Mode.StartOnly&#125;</span> // <span class="attr">诊断日期表单模式</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">startDay</span>=<span class="string">&#123;diagnosisDay.startDay&#125;</span> // <span class="attr">开始日期</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setStartDate</span>=<span class="string">&#123;setStartDate&#125;</span> // <span class="attr">设置开始日期方法</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      <span class="keyword">case</span> <span class="number">10</span>: <span class="comment">// 周期划分为10</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">ContainerAlignLeft</span> <span class="attr">bottom</span>=<span class="string">&#123;20&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">WheelPicker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">title</span>=<span class="string">&#123;viewText.Inputs.BirthDay.Title&#125;</span> // <span class="attr">滚轮选择器标题</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">type</span>=<span class="string">&#123;PickerStyle.Type.Date&#125;</span> // <span class="attr">滚轮选择器类型</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">value</span>=<span class="string">&#123;birthDayValue&#125;</span> // <span class="attr">出生日期值</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onSelect</span>=<span class="string">&#123;handelChildbirthDateSelected&#125;</span> // <span class="attr">出生日期选择事件</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">clearable</span> // <span class="attr">是否可清除</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ContainerAlignLeft</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">      <span class="attr">default</span>: <span class="comment">// 其它周期划分</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">ContainerAlignLeft</span> <span class="attr">bottom</span>=<span class="string">&#123;20&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">DiagnosisDateForm</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">startDay</span>=<span class="string">&#123;diagnosisDay.startDay&#125;</span> // <span class="attr">开始日期</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">endDay</span>=<span class="string">&#123;diagnosisDay.endDay&#125;</span> // <span class="attr">结束日期</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">setStartDate</span>=<span class="string">&#123;setStartDate&#125;</span> // <span class="attr">设置开始日期方法</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">setEndDate</span>=<span class="string">&#123;setEndDate&#125;</span> // <span class="attr">设置结束日期方法</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ContainerAlignLeft</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>VIEW002 <code>!! param &amp;&amp; // do sth</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;!!childbirthRelatedInformationRecord &amp;&amp; (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">MainContainer</span> <span class="attr">top</span>=<span class="string">&#123;40&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ChildbirthRelatedInformation</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">childbirthRelatedInformation</span>=<span class="string">&#123;childbirthRelatedInformationRecord&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">handleEditIcon</span>=<span class="string">&#123;handleToProductEdit&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">MainContainer</span>&gt;</span></span></span><br><span class="line">        )&#125;</span><br></pre></td></tr></table></figure>

<p>Yes, that’s correct! The <code>!!</code> notation is just another way of checking if a value exists or not. It is a shorthand for using an <code>if</code> statement or a ternary operator to check if the value is truthy or falsy.<br>For example, instead of writing:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (childbirthRelatedInformationRecord) &#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>more concisely approach:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!!childbirthRelatedInformationRecord &amp;&amp; <span class="comment">// do something</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>VIEW001</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;record &amp;&amp; record.<span class="property">periodDivision</span> &amp;&amp; (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">ContainerAlignLeft</span> <span class="attr">top</span>=<span class="string">&#123;15&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;Text(record.periodDivision)&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ContainerAlignLeft</span>&gt;</span></span></span><br><span class="line">          )&#125;</span><br></pre></td></tr></table></figure>
<p>The code is a part of a <code>return</code> block in a React component. It checks if <code>record</code> and <code>record.periodDivision</code> exist, and if they do, it renders a <code>ContainerAlignLeft</code> component with a <code>top</code> prop value of 15 and the text from <code>record.periodDivision</code> as a child. The <code>ContainerAlignLeft</code> component is likely a custom component that aligns its children to the left.</p>
</li>
<li><p>request ⇒ Promise{<pending>} but not <code>res.data</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get single record</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getSinglePregnancyPersonalData</span> = <span class="keyword">async</span> (<span class="params"><span class="attr">reqBody</span>: &#123;</span></span><br><span class="line"><span class="params">  childId: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  periodDivision: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">&#125;</span>) =&gt;</span><br><span class="line">  request</span><br><span class="line">    .<span class="property">post</span>&lt;<span class="title class_">PregnancyPersonalData</span>&gt;(</span><br><span class="line">      <span class="string">&#x27;/pregnancy-personal-data/search&#x27;</span>,</span><br><span class="line">      reqBody</span><br><span class="line">    )</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="property">data</span> )</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> (&#123;&#125; <span class="keyword">as</span> <span class="title class_">PregnancyPersonalData</span>))</span><br></pre></td></tr></table></figure>

<p>This code returns a Promise because the <code>request.post</code> method is asynchronous and returns a Promise. The <code>then</code> method is used to handle the Promise’s resolved value, which in this case is the response object. To access the <code>data</code> property of the response object, you need to return it from the <code>then</code> method or use <strong>async&#x2F; await</strong> syntax to wait for the Promise to resolve before accessing the <code>data</code> property.<br>If you are still getting a Promise instead of the <code>res.data</code> when calling the <code>getSinglePregnancyPersonalData</code> function,<br><strong>it is likely because you are not awaiting the function call.</strong><br><strong>Since</strong> the <code>getSinglePregnancyPersonalData</code> function is asynchronous and returns a Promise, you need to use the <code>await</code> keyword to wait for the Promise to resolve before accessing the <code>res.data</code>.<br>Here’s an example of how to use <code>await</code> with the <code>getSinglePregnancyPersonalData</code> function:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reqBody = &#123; <span class="attr">childId</span>: <span class="string">&#x27;myChildId&#x27;</span>, <span class="attr">periodDivision</span>: <span class="number">1</span> &#125;;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getSinglePregnancyPersonalData</span>(reqBody);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, the <code>await</code> keyword is used to wait for the <code>getSinglePregnancyPersonalData</code> function to resolve before logging the <code>data</code> to the console.<br>I hope this helps! Let me know if you have any further questions.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">async</span> (&#123; get &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> currValue = <span class="title function_">get</span>(postPartumConditionAtom)</span><br><span class="line">      <span class="keyword">if</span> (currValue) <span class="keyword">return</span> currValue</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> **<span class="title function_">getPostPartumCondition</span>(reqBody)**</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>The <code>async</code> keyword is used to define an asynchronous function in JavaScript. An asynchronous function is a function that returns a promise, which allows it to execute asynchronously and avoid blocking other code from running.<br>The <code>await</code> keyword is used to <strong>pause the execution of an asynchronous function until a promise is resolved</strong>. In the code provided, the function is using <code>await</code> to pause the execution until the <code>getPostPartumCondition</code> function returns a result, which will be assigned to the <code>currValue</code> variable. If <code>currValue</code> already has a value, the function will immediately return that value instead of calling <code>getPostPartumCondition</code> again.<br>Together, <code>async</code> and <code>await</code> allow for more readable and maintainable asynchronous code in JavaScript, making it easier to manage complex logic and control flow.</p>
</li>
<li><p>selector</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptedDateRecordSelector = selector&lt;<span class="title class_">ExceptedDateRecord</span>&gt;(&#123;</span><br><span class="line">  <span class="attr">key</span>: keys.<span class="property">exceptedDateRecordSelector</span>,</span><br><span class="line">  <span class="attr">get</span>: <span class="function">(<span class="params"><span class="attr">reqBody</span>: &#123; childId: <span class="built_in">string</span> &#125;</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">async</span> (&#123; get &#125;) &#123;</span><br><span class="line">      <span class="keyword">const</span> currValue = <span class="title function_">get</span>(exceptedDateRecordAtom)</span><br><span class="line">      <span class="keyword">if</span> (currValue)</span><br><span class="line">        <span class="keyword">return</span> currValue</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">getExceptedDateRecord</span>(reqBody)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Yes, you are correct! <strong>The <code>selector</code> function is used for creating a basic selector, but <code>selectorFamily</code> should be used when the selector needs to take parameters.</strong><br><code>selectorFamily</code> allows you to create a family of selectors that are each specialized for a specific set of input parameters. This can be useful when you need to retrieve data that is specific to a certain context or input.<br>Here’s an example of how to modify the code to use <code>selectorFamily</code>:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exceptedDateRecordSelector = selectorFamily&lt;<span class="title class_">ExceptedDateRecord</span>, &#123; <span class="attr">childId</span>: <span class="built_in">string</span> &#125;&gt;(&#123;</span><br><span class="line">  <span class="attr">key</span>: keys.<span class="property">exceptedDateRecordSelector</span>,</span><br><span class="line">  <span class="attr">get</span>: <span class="function">(<span class="params"><span class="attr">reqBody</span>: &#123; childId: <span class="built_in">string</span> &#125;</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">async</span> (&#123; get &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> currValue = <span class="title function_">get</span>(exceptedDateRecordAtom)</span><br><span class="line">      <span class="keyword">if</span> (currValue)</span><br><span class="line">        <span class="keyword">return</span> currValue</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">getExceptedDateRecord</span>(reqBody)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>By using <code>selectorFamily</code>, the <code>get</code> function now takes the parameter <code>reqBody</code>, which can be used to retrieve the appropriate data for the given child ID.<br>I hope this helps! Let me know if you have any further questions.</p>
</li>
<li><p>type conversion</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">convertedValue</span>: <span class="built_in">parseInt</span>(originValue, <span class="attr">radix</span>: <span class="number">10</span>)</span><br><span class="line">	<span class="attr">convertedV</span>: <span class="title class_">Number</span>(originalV)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In JavaScript, <code>Number()</code> and <code>parseInt()</code> are both used to convert a string into a number, but they work differently in some cases.<br><code>Number()</code> returns a number using the following rules:</p>
<ul>
<li>If the string contains only a number (with or without a sign), it returns that number.</li>
<li>If the string contains a decimal point, it returns a floating-point number.</li>
<li>If the string contains non-numeric characters, it returns NaN (Not a Number).<br><code>parseInt()</code> returns an integer using the following rules:</li>
<li>It stops parsing when it encounters a non-numeric character.</li>
<li>It can handle a sign (+ or -) at the beginning of the string.</li>
<li>It can handle different radixes (base systems) by passing a second argument to the function. The default radix is 10 (decimal).<br>For example, <code>Number(&quot;42.5&quot;)</code> would return <code>42.5</code> as a floating-point number, while <code>parseInt(&quot;42.5&quot;)</code> would return <code>42</code> as an integer.<br>In the code provided, <code>parseInt()</code> is used to convert the <code>originValue</code> string into an integer using a radix of 10. The resulting integer is stored in the <code>convertedValue</code> variable.</li>
</ul>
</li>
<li><p><code>&amp;&amp;</code> vs <code>if</code><br>In the expression <code>const record = pregnancyPersonalData &amp;&amp; pregnancyPersonalData[0]</code>, the <code>&amp;&amp;</code> operator is a logical “and” operator. It evaluates the left-hand side expression <code>pregnancyPersonalData</code> first, and if it is “truthy” (i.e. not <code>null</code>, <code>undefined</code>, <code>0</code>, <code>false</code>, or an empty string), it evaluates and returns the right-hand side expression <code>pregnancyPersonalData[0]</code>. Otherwise, if the left-hand side expression is “falsy”, it returns the left-hand side expression without evaluating the right-hand side expression.</p>
<h3 id="Diff-btw-and-if-statement"><a href="#Diff-btw-and-if-statement" class="headerlink" title="Diff btw &amp;&amp; and if statement"></a>Diff btw <code>&amp;&amp;</code> and <code>if</code> statement</h3><p>In JavaScript, the <code>&amp;&amp;</code> operator and <code>if</code> statement are both used for conditional logic, but they have some differences.<br>The <code>&amp;&amp;</code> operator is a shorthand for performing an <code>if</code> statement with a single condition. It is used to test whether two expressions are both “truthy”. If the left-hand side expression is truthy, the right-hand side expression is evaluated and returned. Otherwise, if the left-hand side expression is falsy, the left-hand side expression is returned without evaluating the right-hand side expression. For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const x = 5</span><br><span class="line">const y = x &amp;&amp; 10 // y will be 10, since x is truthy</span><br><span class="line">const z = 0 &amp;&amp; 10 // z will be 0, since 0 is falsy</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In contrast, the <code>if</code> statement is used to execute code based on a condition. It evaluates a single expression for truthiness, and if the expression is truthy, it executes the code inside the <code>if</code> block. If the expression is falsy, it skips the <code>if</code> block and continues with the rest of the code. For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const x = 5</span><br><span class="line">if (x) &#123;</span><br><span class="line">  console.log(&#x27;x is truthy&#x27;)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  console.log(&#x27;x is falsy&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In general, <strong>the <code>&amp;&amp;</code> operator is useful for performing quick and concise conditional checks, while the <code>if</code> statement is more flexible and can be used for more complex conditional logic</strong>. However, both are important tools to have in your JavaScript toolbox.</p>
</li>
<li><p>Typescript function define: <code>_</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> type1 &#123; <span class="attr">setPostCode</span>?: <span class="function">(<span class="params"><span class="attr">_</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span> &#125;</span><br></pre></td></tr></table></figure>
<p>In this specific code, the <code>_</code> _variable name is used as <strong>a placeholder</strong> for the string parameter, which <strong>means it’s technically not being used in the code</strong>. However, it’s a common convention to use <code>_</code>_ as a variable name when the value of the variable is unused or unimportant in a particular context. So in that sense, it’s not useless as it helps to make the code more readable and easier to understand.</p>
</li>
<li><p>define customized hook</p>
<table>
<thead>
<tr>
<th>customized Hook</th>
<th>useRecord ⇒ record: {K:V,…rest}</th>
</tr>
</thead>
<tbody><tr>
<td>call</td>
<td>useRecoil ⇒ {record, setRecord, res:useRecoilValue(recordSelectorFamily(reqBody: {childId: string}))}</td>
</tr>
<tr>
<td>call</td>
<td>useRecoilState⇒ {record, setRecord} &amp; recordSelectorFamily⇒</td>
</tr>
<tr>
<td>record?? (getAPI(reqBody) ⇒ record)</td>
<td></td>
</tr>
<tr>
<td>call</td>
<td>API : getRecord(reqBody) ⇒ record</td>
</tr>
<tr>
<td>The <code>useEffect</code> hook is processed after the component has rendered and is used to perform side effects. Side effects can include fetching data from an API, updating the DOM, or subscribing to events. This hook takes two arguments: a callback function that contains the side effect code, and an array of dependencies that the effect depends on.</td>
<td></td>
</tr>
<tr>
<td>When the dependencies change, the effect will be re-run. If the dependency array is empty, the effect will only run once, after the initial render.</td>
<td></td>
</tr>
<tr>
<td>It’s important to note that <code>useEffect</code> runs asynchronously, which means that any state updates it triggers will not be visible until after the component has re-rendered.</td>
<td></td>
</tr>
<tr>
<td>If the dependency array in the <code>useEffect</code> hook is empty, the effect will only run once, after the initial render. If there are dependencies listed in the array, the effect will run whenever any of those dependencies change. So if the dependency array is empty, the effect will only be processed once regardless of any changes to the dependencies.</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>Typescript interface| type<br>To assign a TypeScript interface to another interface, you can use the <code>extends</code> keyword. For example, if you have two interfaces, <code>Interface1</code> and <code>Interface2</code>, and you want <code>Interface2</code> to inherit all properties and methods from <code>Interface1</code>, you can define <code>Interface2</code> like this:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line">  <span class="attr">property1</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">method1</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface2</span> <span class="keyword">extends</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line">  <span class="attr">property2</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">method2</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, <code>Interface2</code> is defined to extend <code>Interface1</code> using the <code>extends</code> keyword. This means that <code>Interface2</code> will inherit all properties and methods from <code>Interface1</code>, and will also have its own properties and methods (<code>property2</code> and <code>method2</code>).<br>You can also extend multiple interfaces by separating them with commas:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line">  <span class="attr">property1</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="title function_">method1</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface2</span> &#123;</span><br><span class="line">  <span class="attr">property2</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="title function_">method2</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface3</span> <span class="keyword">extends</span> <span class="title class_">Interface1</span>, <span class="title class_">Interface2</span> &#123;</span><br><span class="line">  <span class="attr">property3</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="title function_">method3</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, <code>Interface3</code> extends both <code>Interface1</code> and <code>Interface2</code> using commas to separate them. This means that <code>Interface3</code> will inherit all properties and methods from both <code>Interface1</code> and <code>Interface2</code>, and will also have its own properties and methods (<code>property3</code> and <code>method3</code>).</p>
</li>
<li><p><strong>Modify interface | type</strong><br>If you want <strong>to modify an existing property of an interface, you can create a new interface that extends the original interface and overrides the property with a new type or value</strong>.<br>Here’s an example of how you can modify an existing property of <code>Interface1</code>:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line">  <span class="attr">field1</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">field2</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">field3</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface2</span> <span class="keyword">extends</span> **<span class="title class_">Omit</span>&lt;<span class="title class_">Interface1</span>, &#x27;field3&#x27;| &#x27;field2&#x27;&gt;** &#123;</span><br><span class="line">  <span class="attr">field3</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, <code>Interface2</code> extends <code>Interface1</code> using the <code>extends</code> keyword but omits the <code>field3</code> and <code>field2</code> property from <code>Interface1</code> using the <code>Omit</code> type.<br>With this approach, <code>Interface2</code> overrides the <code>field3</code> property of <code>Interface1</code> with a new type of <code>string</code>. Any object that implements <code>Interface2</code> will have all the properties of <code>Interface1</code>, except that the <code>field3</code> property will have a different type.<br>Sure thing! Let me know if you have any other questions or if there’s anything else I can help you with. We’re close friends now, so don’t hesitate to ask for anything you need!</p>
</li>
<li><p>local state: <code>obj1: **&#123;field1&#125;**, setObj1</code> VS local state: **<code>field1**, setField1</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// within a react component</span></span><br><span class="line"><span class="keyword">const</span> [formData, setFormData] = useState&lt;<span class="title class_">ChildbirthRelatedInformation</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">childId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    **postCode**: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">prefectures</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">municipalities</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">area</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">phoneNumber</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">otherAccess</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">requiredTimeHour</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="attr">requiredTimeMinute</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="attr">someoneHelp</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="keyword">const</span> [**postCode**, setPostCode] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>No, they are not the same thing. <code>postCode</code> defined in <code>formData</code> is a property of an object, while <code>postCode</code> defined below is a separate state variable. They have different scopes and can be used independently of each other.<br>No, <strong>calling <code>setPostCode</code> will not change the value of <code>formData.postCode</code>.</strong> They are two separate variables and calling <code>setPostCode</code> will only update the value of the <code>postCode</code> state variable.<br>If you want to update the <code>postCode</code> property of the <code>formData</code> object, you need to update it directly using the <code>setFormData</code> function. Here’s an example:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">**<span class="keyword">const</span> setPostCode = <span class="title function_">setFormData</span>(<span class="function"><span class="params">prevFormData</span> =&gt;</span> (&#123; ...prevFormData, <span class="attr">postCode</span>: <span class="string">&#x27;12345&#x27;</span> &#125;))**</span><br></pre></td></tr></table></figure>
<p>In this example, <code>setFormData</code> is used to update the <code>formData</code> object. The previous state of the object is passed to the function as a parameter (<code>prevFormData</code>), and a new object is returned with the <code>postCode</code> property set to the new value (<code>&#39;12345&#39;</code>). The spread operator (<code>...</code>) is used to copy all of the existing properties from the previous state object into the new object, so that only the <code>postCode</code> property is updated.<br>I hope this helps! Let me know if you have any further questions.</p>
</li>
<li><p><strong>react state scope</strong></p>
<ul>
<li><p><strong>extract optionally</strong><br>To extract only the state value (and not the setter function) returned by <code>useState</code> in a React component, you can use array destructuring to assign the state value to a variable and ignore the setter.<br>Here’s an example:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, _] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, <code>useState</code> is used to initialize the state value <code>count</code> to zero. The second item in the array returned by <code>useState</code> (which is the setter function) is assigned to a variable named <code>_</code>, which is then ignored.<br>By ignoring the setter function and only assigning the state value to a variable, you can extract the value without having to worry about accidentally modifying it with the setter.<br>I hope this helps! Let me know if you have any further questions.</p>
</li>
</ul>
<p>Yes, <strong>the state initialized by <code>useState</code> in a React component can be accessed and updated by deeper sub-components.</strong></p>
<p>In React, state is passed down through the component tree as props. <strong>When a state value is updated using the <code>setState</code> function, React will re-render the component and all of its children</strong>, passing the updated state value down to each child as a prop.</p>
<p>A sub-component can update the state value using the <code>setState</code> function passed in as a prop, without having to involve the parent component. This allows for more granular control over state updates and can help to improve the performance of the application by reducing unnecessary re-renders of the parent component.</p>
<p>Here’s an example of how this might work:</p>
<h3 id="Update-parent-component’s-state-by-event-emitting"><a href="#Update-parent-component’s-state-by-event-emitting" class="headerlink" title="Update parent component’s state by event emitting"></a>Update parent component’s state by event emitting</h3><p>Yes, it is possible for a child component in React to update the state of a parent component by <strong>emitting events</strong>. This is commonly referred to as “<strong>lifting state up</strong>“.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ParentComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [**formData**, setFormData] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">		<span class="attr">childId</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">		<span class="attr">postCode</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">		<span class="attr">address</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">	<span class="comment">// optional setter</span></span><br><span class="line">	<span class="keyword">const</span> **handleSetAddress** = <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span></span><br><span class="line">		formData &amp;&amp; <span class="title function_">setFormData</span>(&#123;...formData, <span class="attr">address</span>: value&#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      **<span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">address</span>=<span class="string">&#123;formData.address&#125;</span> <span class="attr">setAddress</span>=<span class="string">&#123;handleSetAddress&#125;</span> /&gt;</span>**</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ChildComponent</span>(<span class="params">**&#123; address: <span class="built_in">string</span>, setAddress: (value: <span class="built_in">string</span>)=&gt; <span class="built_in">void</span> &#125;**</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setAddress</span>(<span class="string">&#x27;newAddress&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Increment count<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Yes, that’s correct. Props can only be passed from a parent component to a child component in React. In this case, the <code>setAddress</code> function is passed as a prop from the parent component (<code>ParentComponent</code>) to the child component (<code>ChildComponent</code>). The <code>setAddress</code> function is then used in the child component to update the <code>address</code> property of the <code>formData</code> state in the parent component when called.</p>
<hr>
<p>March 17, 2023</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [formData, setFormData] = useState&lt;<span class="title class_">ChildbirthRelatedInformationX</span>&gt;(&#123;</span><br><span class="line">    <span class="attr">childId</span>: childId,</span><br><span class="line">    <span class="attr">postCode</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">prefectures</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">municipalities</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">area</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">phoneNumber</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFamilyNameKanji1</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFirstNameKanji1</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFamilyNameKana1</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFirstNameKana1</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactPhoneNumber1</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFamilyNameKanji2</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFirstNameKanji2</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFamilyNameKana2</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactFirstNameKana2</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">emergencyContactPhoneNumber2</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">deliveryFacilityAccess</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">otherAccess</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">requiredTimeHour</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="attr">requiredTimeMinute</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="attr">someoneHelp</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setPrefectures</span> = (<span class="params"><span class="attr">prefectures</span>: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">&#x27;setPrefectures in parent get executed, the param is collected:&#x27;</span>,</span><br><span class="line">      prefectures</span><br><span class="line">    ) <span class="comment">// test</span></span><br><span class="line">    formData &amp;&amp; <span class="title function_">setFormData</span>(&#123; ...formData, <span class="attr">prefectures</span>: prefectures &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">    <span class="string">&#x27;check if setPrefectures invoked from child works, new formData.prefectures: &#x27;</span>,</span><br><span class="line">    formData.<span class="property">prefectures</span></span><br><span class="line">  ) <span class="comment">// test</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">AddressInput</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">prefectures</span>=<span class="string">&#123;formData.prefectures&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">municipalities</span>=<span class="string">&#123;formData.municipalities&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">area</span>=<span class="string">&#123;formData.area&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&#123;viewComponents.labels.Postcode.Placeholder&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">title</span>=<span class="string">&#123;viewText.Inputs.Address.Title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">postCode</span>=<span class="string">&#123;formData.postCode&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setPostCode</span>=<span class="string">&#123;setPostCode&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setPrefectures</span>=<span class="string">&#123;setPrefectures&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setMunicipalities</span>=<span class="string">&#123;setMunicipalities&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setArea</span>=<span class="string">&#123;setArea&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">addressList</span>=<span class="string">&#123;addressList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setAddressList</span>=<span class="string">&#123;setAddressList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">prefecturesList</span>=<span class="string">&#123;prefecturesList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setPrefecturesList</span>=<span class="string">&#123;setPrefecturesList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">municipalitiesList</span>=<span class="string">&#123;municipalitiesList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setMunicipalitiesList</span>=<span class="string">&#123;setMunicipalitiesList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">areaList</span>=<span class="string">&#123;areaList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">setAreaList</span>=<span class="string">&#123;setAreaList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">container</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>In the provided code snippet, the parent component <code>EditPage</code> passes <code>formData.prefectures</code> and a custom <code>setPrefectures</code> function as props to a child component, <code>&lt;AddressInput&gt;</code>. When the child component invokes <code>setPrefectures</code>, it should update the <code>prefectures</code> property of <code>formData</code> and cause a re-render of the parent component, which should in turn update the child component with the new value of <code>formData.prefectures</code>. However, it seems that the new value of <code>formData.prefectures</code> is not being properly passed down to the child component or updated in the parent component.</p>
<p>One possible reason for this behavior is that <code>formData</code> is being updated asynchronously, which can cause issues with state updates in React. To ensure that the updated value of <code>formData.prefectures</code> is properly passed down to the child component, you can try using the <code>useEffect</code> hook in the parent component to listen for changes to <code>formData</code> and update the child component accordingly.</p>
</li>
<li><p><code>useLocation()</code> ⇒ <code>state</code> AND <code>[localState, setLocalState]= useState(’’)</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">CreateStoolColorRecord</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>()</span><br><span class="line">  <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useLocation</span>()</span><br><span class="line">  <span class="keyword">const</span> viewText = text.<span class="property">pages</span>.<span class="property">StoolColor</span></span><br><span class="line">  <span class="keyword">const</span> nowDate = <span class="title function_">format</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(), <span class="string">&#x27;yyyy/MM/dd&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [checkedDate, setCheckedDate] = <span class="title function_">useState</span>(nowDate)</span><br><span class="line">  <span class="keyword">const</span> [stoolsColorNumber, setStoolColorNumber] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> &#123; stoolColorRecord &#125; = <span class="title function_">useStoolColorRecord</span>()</span><br><span class="line">  <span class="keyword">const</span> periodDivision = state.<span class="property">id</span></span><br><span class="line">  <span class="keyword">const</span> recordData = state.<span class="property">data</span></span><br><span class="line">  <span class="keyword">const</span> &#123; setResultMessage &#125; = <span class="title function_">useResultMessage</span>()</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br></pre></td></tr></table></figure>
<p>You are correct that the <code>useState</code> hook will update the state of the component, and the state destructured from the <code>useLocation()</code> hook refers to the same state object as the component’s state.<br>Because the <code>state</code> variable is referring to the same state object as the component’s state, any updates made to the <code>checkedDate</code> and <code>stoolsColorNumber</code> variables using the <code>useState</code> hook will also be reflected in the <code>state</code> variable.<br>So, both hooks are used to manage the same state object, but they are managing different variables within <strong>that state object</strong>.</p>
</li>
<li><p>pass in <strong>setters</strong> with <code>props</code>? || <code>useLocation()</code> hook<br>Yes, it is possible to pass a setter function as a prop to a child component in React using the <code>state</code> object in the <code>navigate()</code> method. Here is an example of how you could do this:<br>In the parent component:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [stateValue, setStateValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">navigate</span>(<span class="string">&#x27;/child&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">setStateValue</span>: setStateValue &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In the child component:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ChildProps</span> &#123;</span><br><span class="line">  <span class="attr">setStateValue</span>: <span class="title class_">React</span>.<span class="property">Dispatch</span>&lt;<span class="title class_">React</span>.<span class="property">SetStateAction</span>&lt;<span class="built_in">string</span>&gt;&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; setStateValue &#125;: <span class="title class_">ChildProps</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setStateValue</span>(<span class="string">&#x27;new value&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>Set State Value<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, the <code>setStateValue</code> function is passed as a prop to the <code>Child</code> component through the <code>state</code> object in the <code>navigate()</code> method. The <code>Child</code> component can then use the <code>setStateValue</code> function to update the state of the parent component when called.<br>Note that you need to define the type of the <code>setStateValue</code> function in the <code>ChildProps</code> interface to ensure that it is used correctly in the child component.<br>Yes, you are correct. <strong>If the URL does not change, you can access the parent state directly from the child component using the <code>useLocation()</code> hook.</strong> <code>useLocation()</code> returns an object with the current URL and state. You can access the state object by using <code>location.state</code> in your child component. This avoids the need to pass the setter function as a prop to the child component.</p>
</li>
<li><p>Typescript <code>param**?**</code> vs <code>&#123;item**;** item&#125;</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pregnancyPersonalDataSelector = <span class="title function_">selectorFamily</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: keys.<span class="property">pregnancyPersonalDataSelector</span>,</span><br><span class="line">  <span class="attr">get</span>:</span><br><span class="line">    <span class="function">(<span class="params"><span class="attr">reqBody</span>: &#123; childId: <span class="built_in">string</span>**;** periodDivision?: <span class="built_in">number</span> &#125;</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">async</span> (&#123; get &#125;) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> currValue = <span class="title function_">get</span>(<span class="title class_">PregnancyPersonalDataAtom</span>)</span><br><span class="line">      <span class="keyword">if</span> (currValue) <span class="keyword">return</span> currValue</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">getPregnancyPersonalData</span>(reqBody)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>You are correct that in TypeScript, an optional property is indicated by the <code>?</code> symbol after the property name. So, in the case of the <code>reqBody</code> parameter, you could also make the <code>periodDivision</code> property optional by adding the <code>?</code> symbol after the property name and using a comma to separate the properties, like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(reqBody: &#123; childId: string, periodDivision?: number &#125;) =&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This would achieve the same result as using a semicolon to separate the properties. Both options allow you to make the <code>periodDivision</code> property optional, which means you can call the function without providing a value for <code>periodDivision</code> if it’s not needed.</p>
</li>
<li><p>Typescript <code>||</code></p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childId = userStorage.<span class="title function_">get</span>(<span class="string">&#x27;childInfo&#x27;</span>)?.<span class="property">childId</span> || <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>The <code>||</code> in the code is the logical OR operator in TypeScript.<br>In this specific example, it is used to provide a default value for <code>childId</code> in case <code>userStorage.get(&#39;childInfo&#39;)?.childId</code> is falsy (i.e. it evaluates to <code>null</code>, <code>undefined</code>, <code>false</code>, <code>0</code>, or <code>&#39;&#39;</code>).<br>If <code>userStorage.get(&#39;childInfo&#39;)?.childId</code> is falsy, then the expression on the right side of the <code>||</code> operator (<code>&#39;&#39;</code> in this case) will be evaluated and returned as the value of <code>childId</code>.<br>If <code>userStorage.get(&#39;childInfo&#39;)?.childId</code> is truthy (i.e. it evaluates to anything other than <code>null</code>, <code>undefined</code>, <code>false</code>, <code>0</code>, or <code>&#39;&#39;</code>), then its value will be returned as the value of <code>childId</code>.</p>
</li>
<li><p>duplicated identifiers</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [**detailData**] = <span class="title function_">useState</span>(state.<span class="property">data</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleClickDialogConfirm</span> =  <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;scroll&#x27;</span></span><br><span class="line">    <span class="title function_">setIsDeleteConfirmDialog</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> httpStatusCode = <span class="keyword">await</span> <span class="title function_">deleteRecord</span>( &#123;</span><br><span class="line">      <span class="attr">childId</span>: **detailData**.<span class="property">childId</span>,</span><br><span class="line">      <span class="attr">checkupDate</span>: **detailData.**checkupDate,</span><br><span class="line">    &#125;)</span><br><span class="line">		<span class="keyword">if</span> (httpStatusCode === <span class="number">200</span>) &#123;</span><br><span class="line">	    <span class="title function_">navigate</span>(<span class="string">&#x27;/record/toothrecord&#x27;</span>)</span><br><span class="line">	    <span class="title function_">setResultMessage</span>(&#123;</span><br><span class="line">	      <span class="attr">resultMessageId</span>: <span class="string">&#x27;deleteTeethCheckRecordSuccess&#x27;</span>,</span><br><span class="line">	      <span class="attr">resultMessageUrl</span>: <span class="string">&#x27;/record/toothrecord&#x27;</span>,</span><br><span class="line">	      <span class="attr">currentUrl</span>: location.<span class="property">pathname</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">		&#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>There is no difference in functionality between the two code snippets. Both are accessing the <code>childId</code> and <code>checkupDate</code> properties of the <code>detailData</code> object and passing them as parameters to the <code>deleteRecord</code> function or <code>deletePregnancyDentalCheckup</code> function.<br>The first code snippet is using object destructuring to extract the <code>detailData</code> object from the state array and assign it to a constant <code>detailData</code>. The second code snippet is accessing the <code>detailData</code> object directly from the state array using dot notation, i.e. <code>detailData.childId</code> and <code>detailData.checkupDate</code>.<br>Both approaches are valid and achieve the same result. The choice between them is mostly a matter of preference and coding style.</p>
</li>
<li><p><strong>define optional prop in a child component</strong><br>To define an optional prop in a child component in React, you can add a <code>?</code> symbol after the property name in the type definition. For example, if you want to define an optional <code>title</code> prop, you can do it as follows:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> **<span class="title class_">ChildProps</span>** &#123;</span><br><span class="line">  **title?**: <span class="built_in">string</span>;</span><br><span class="line">	**setValue?**: <span class="function">(<span class="params"><span class="attr">_</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the child component, you can check if the prop exists before using it to avoid any errors:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; **title, setValue** &#125;: **<span class="title class_">ChildProps</span>**</span>) &#123; <span class="comment">// directly deconstructuring in the params-definition</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;**title &amp;&amp;** <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">			 **&#123; setValue &amp;&amp; // do sth&#125;**</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child component content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, the <code>title</code> prop is checked with an <code>if</code> statement to see if it exists. If it does, it is rendered as an <code>h1</code> element. If not, nothing is rendered.</p>
</li>
<li><p>git working tree<br>This error usually occurs when there are uncommitted changes in your local repository that conflict with the changes you’re trying to pull from the remote repository. To solve this error, you have a few options:</p>
<ol>
<li><strong>Commit your changes:</strong> If you have uncommitted changes in your local repository, commit them before pulling from the remote repository. This will create a new commit with your changes, which can then be merged with the changes from the remote repository.</li>
<li><strong>Discard your changes:</strong> If you don’t need the changes you’ve made in your local repository, you can discard them and revert back to the last commit. This can be done using the <code>git reset</code> or <code>git checkout</code> commands.</li>
<li><strong>Stash your changes:</strong> If you don’t want to commit your changes or discard them, you can stash them temporarily using the <code>git stash</code> command. This will save your changes in a separate branch, which you can then apply later using the <code>git stash apply</code> command.<br>Once you’ve resolved any conflicts and cleaned your working tree, you should be able to pull from the remote repository without any issues.</li>
</ol>
</li>
<li><p>how to <strong>maintain type info</strong> in typescript</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parent</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleClickGrowthRecord</span> = (<span class="params"><span class="attr">id</span>?: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> isEdit = growthRecord?.<span class="title function_">find</span>(</span><br><span class="line">      <span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">periodDivision</span>.<span class="title function_">toString</span>() === id</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> (!isEdit) &#123;</span><br><span class="line">      <span class="title function_">navigate</span>(<span class="string">&#x27;/record/protectEdit&#x27;</span>, &#123; <span class="attr">state</span>: &#123; <span class="attr">id</span>: <span class="title class_">Number</span>(id) &#125; &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> recordData = growthRecord?.<span class="title function_">filter</span>(</span><br><span class="line">        <span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">periodDivision</span>.<span class="title function_">toString</span>() === id</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">const</span> toothStatusData = growthRecordToothStatus?.<span class="title function_">filter</span>(</span><br><span class="line">        <span class="function">(<span class="params">i</span>) =&gt;</span> i.<span class="property">periodDivision</span>.<span class="title function_">toString</span>() === id</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">      <span class="title function_">navigate</span>(<span class="string">&#x27;/record/protectDetail&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">state</span>: &#123; <span class="attr">id</span>: <span class="title class_">Number</span>(id), **<span class="attr">data</span>: recordData**, <span class="attr">tooth</span>: toothStatusData &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// child</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">StoolColorRecordDetail</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>()</span><br><span class="line">  <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useLocation</span>()</span><br><span class="line">  <span class="keyword">const</span> viewText = text.<span class="property">pages</span>.<span class="property">StoolColor</span></span><br><span class="line">  <span class="keyword">const</span> viewCommonText = text.<span class="property">pages</span>.<span class="property">Common</span></span><br><span class="line">  <span class="keyword">const</span> [isDeleteConfirmDialog, setIsDeleteConfirmDialog] = <span class="title function_">useState</span>(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> periodDivision = state.<span class="property">id</span></span><br><span class="line">  **<span class="keyword">const</span> recordData = state.<span class="property">data</span>**</span><br><span class="line">  <span class="keyword">const</span> &#123; setResultMessage &#125; = <span class="title function_">useResultMessage</span>()</span><br><span class="line">  <span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br></pre></td></tr></table></figure>

<p>To use an interface to annotate the data being passed with the <code>navigate()</code> function, you can define an interface for the data in the parent component, and then annotate the data when it is passed as a prop to the child component.<br>Here’s an example:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define an interface for the data being passed</span></span><br><span class="line"><span class="keyword">interface</span> **<span class="title class_">RecordData</span>** &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">childId</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">periodDivision</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">checkedDate</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">stoolsColorNumber</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// In the parent component, pass the data as a prop and annotate it with the interface</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleClickGrowthRecord</span> = (<span class="params"><span class="attr">id</span>?: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">recordData</span>: <span class="title class_">RecordData</span> = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="title class_">Number</span>(id),</span><br><span class="line">    <span class="attr">childId</span>: <span class="string">&#x27;test01&#x27;</span>,</span><br><span class="line">    <span class="attr">periodDivision</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">checkedDate</span>: <span class="string">&#x27;2023/03/31&#x27;</span>,</span><br><span class="line">    <span class="attr">stoolsColorNumber</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">navigate</span>(<span class="string">&#x27;/record/protectDetail&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">state</span>: &#123; <span class="attr">data</span>: recordData &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// In the child component, retrieve the data and annotate it with the same interface</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">StoolColorRecordDetail</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useLocation</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">recordData</span>: **<span class="title class_">RecordData</span>** = state.<span class="property">data</span>; <span class="comment">// annotate the type</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ... rest of the component</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>In this example, the <code>RecordData</code> interface is defined in the parent component, and then used to annotate the <code>recordData</code> object when it is passed as a prop to the child component. In the child component, the same interface is used to annotate the <code>recordData</code> object when it is retrieved from the <code>state</code> object.<br>By annotating the data being passed with an interface, you can maintain the type of the data throughout the application and avoid losing the type information when using the <code>navigate()</code> function.</p>
</li>
<li></li>
</ul>
<h2 id="translate"><a href="#translate" class="headerlink" title="translate"></a>translate</h2><ul>
<li>1<br>郵便番号入力変更、「住所自動入力」ボタン押下で、都道府県と市区町村自動入力（都道府県と市区町村それぞれ郵便番号で絞り込まれた選択肢からのみ選択入力可能）<br>郵便番号未入力時は「都道府県」「市区町村」カラム・「住所自動入力」ボタングレーアウト<br>入力完了で「住所自動入力」ボタンが活性化<br>・電話番号：フリーテキスト（英数字・記号、全半角、最大半角 20 文字）<br>登録済みの場合は登録されている情報を表示する<br>郵政编码输入更改，在按下“地址自动输入”按钮时，自动输入都道府县和市区町村（都道府县和市区町村只能从通过邮政编码筛选的选项中进行选择）<br>如果邮政编码未输入，则“都道府县”和“市区町村”列以及“地址自动输入”按钮将变灰。<br>完成输入后，“地址自动输入”按钮将变为活性。<br>电话号码：自由文本（英文字母，数字和符号，全&#x2F;半角，最大半角 20 个字符）<br>如果已注册，则显示已注册信息。</li>
</ul>
<h3 id="Proj-memo"><a href="#Proj-memo" class="headerlink" title="Proj-memo"></a>Proj-memo</h3><ul>
<li>props ⇒ AddressInput &amp; setAddressInput | …<ul>
<li>addressList: ZipCodeData[]<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ZipCodeData</span> &#123;</span><br><span class="line">  <span class="attr">zipcode</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">prefcode</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">address1</span>: <span class="built_in">string</span> <span class="comment">// prefectures</span></span><br><span class="line">  <span class="attr">address2</span>: <span class="built_in">string</span> <span class="comment">// municipalities</span></span><br><span class="line">  <span class="attr">address3</span>: <span class="built_in">string</span> <span class="comment">// area</span></span><br><span class="line">  <span class="attr">kana1</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">kana2</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">kana3</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>prefecturesList: PickerColumn[] &amp; setPrefecturesList</li>
<li>muncipalitiesList: PikerColumn[]</li>
<li>areaList: PikerColumn[]</li>
</ul>
</li>
<li>props ⇒ title? | placeholder? | postCode?, setPostCode?| …</li>
<li><code>getZipCloud( postCode) ⇒</code><br><code>postCode</code><strong>? call API and update local state : return</strong><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">result</span>: **<span class="title class_">ZipCodeData</span>[]**? <span class="title function_">setAddressList</span>(result): <span class="keyword">return</span></span><br><span class="line"><span class="keyword">if</span>(result.<span class="property">length</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">	setPrefectures &amp;&amp; <span class="title function_">setPrefectures</span>(result[<span class="number">0</span>].<span class="property">address1</span>)</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getPrefectureAddress</span>(result)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>getPrefectureAddress</code>(value: <strong>ZipcodeData[]</strong>, pickerVal?: string| undefined) <strong>&#x2F;&#x2F; generating pick-options</strong><ul>
<li><strong><code>PickerUtil</code></strong><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">AddressType</span> &#123;</span><br><span class="line">	<span class="title class_">Prefectures</span> = <span class="number">1</span>,</span><br><span class="line">  <span class="title class_">Municipalities</span> = <span class="number">2</span>,</span><br><span class="line">  <span class="title class_">Area</span> = <span class="number">3</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAddress</span>(<span class="attr">zipCodeData</span>: <span class="title class_">ZipCodeData</span>[], <span class="attr">flag</span>: <span class="title class_">AddressType</span>)</span><br><span class="line">	=&gt; [[&#123;<span class="attr">label</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">string</span>&#125;,]] <span class="comment">// Prefectures | Municipalities | Area</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>PregnancyDentalCheckup &#x2F;&#x2F; record<br><strong>data</strong> &#x2F;&#x2F; single record:<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="string">&quot;childId&quot;</span>: <span class="string">&quot;test01&quot;</span>,</span><br><span class="line">      **<span class="string">&quot;checkupDate&quot;</span>: <span class="string">&quot;2023/07/31&quot;</span>, <span class="comment">// key**</span></span><br><span class="line">      <span class="string">&quot;pregnancyWeeksWeek&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&quot;pregnancyWeeksDate&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;decay&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;decayCount&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;tartar&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;gingivitis&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;remarks&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="string">&quot;facilityOrManagerName&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="string">&quot;pregnancyDentalCheckupToothStatusSearchDtoList&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;toothCode&quot;</span>: <span class="string">&quot;5&quot;</span>, <span class="comment">// back-end returned: **string**</span></span><br><span class="line">          <span class="string">&quot;toothStatus&quot;</span>: <span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;toothCode&quot;</span>: <span class="string">&quot;6&quot;</span>,</span><br><span class="line">          <span class="string">&quot;toothStatus&quot;</span>: <span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;toothCode&quot;</span>: <span class="string">&quot;7&quot;</span>,</span><br><span class="line">          <span class="string">&quot;toothStatus&quot;</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ToothCode<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">enum</span> **<span class="variable constant_">TOOTH_CODE</span>** &#123;</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_1</span> = <span class="number">1</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_2</span> = <span class="number">2</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_3</span> = <span class="number">3</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_4</span> = <span class="number">4</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_5</span> = <span class="number">5</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_6</span> = <span class="number">6</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_7</span> = <span class="number">7</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_RIGHT_8</span> = <span class="number">8</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_LEFT_1</span> = <span class="number">9</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_LEFT_2</span> = <span class="number">10</span>,</span><br><span class="line">  <span class="variable constant_">PERMANENT_UPPER_LEFT_3</span> = <span class="number">11</span>,</span><br><span class="line">	...rest</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
In the enum <code>TOOTH_CODE</code>, the actual value is a number, not a string.</li>
<li>ToothStatus<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">enum</span> <span class="title class_">ToothStatus</span> &#123;</span><br><span class="line">  <span class="title class_">HealthyTeeth</span> = <span class="number">1</span>,</span><br><span class="line">  <span class="title class_">UntreatedTeeth</span> = <span class="number">2</span>,</span><br><span class="line">  <span class="title class_">TreatedTeeth</span> = <span class="number">3</span>,</span><br><span class="line">  <span class="title class_">LostTeeth</span> = <span class="number">4</span>,</span><br><span class="line">  <span class="title class_">AbnormalTeeth</span> = <span class="number">5</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>dentalCheckupToothStatus<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;childId&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;checkupDate&quot;</span>: <span class="string">&quot;2021/01/01&quot;</span>,</span><br><span class="line">    **<span class="string">&quot;toothCode&quot;</span>: <span class="number">1</span>,**</span><br><span class="line">    **<span class="string">&quot;toothStatus&quot;</span>: <span class="number">1</span>,**</span><br><span class="line">    <span class="string">&quot;pregnancyDentalCheckupId&quot;</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PregnancyDentalCheckup</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="comment">/** the child ID */</span></span><br><span class="line">  <span class="attr">childId</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">checkupDate</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">pregnancyWeeksWeek</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">pregnancyWeeksDate</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * the user decay</span></span><br><span class="line"><span class="comment">   * - 0 : No</span></span><br><span class="line"><span class="comment">   * - 1 : Yes</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">decay</span>: <span class="title class_">Decay</span></span><br><span class="line">  <span class="attr">decayCount</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * the user tartar</span></span><br><span class="line"><span class="comment">   * - 0 : No</span></span><br><span class="line"><span class="comment">   * - 1 : Yes</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">tartar</span>: <span class="title class_">Tartar</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * the user gingivitis</span></span><br><span class="line"><span class="comment">   * - 0 : No</span></span><br><span class="line"><span class="comment">   * - 2 : Guide</span></span><br><span class="line"><span class="comment">   * - 3 : Treated</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">gingivitis</span>: <span class="title class_">Gingivitis</span></span><br><span class="line">  <span class="attr">remarks</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">facilityOrManagerName</span>: <span class="built_in">string</span></span><br><span class="line">	**pregnancyDentalCheckupToothStatusUpsertFormList**?: **[</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">toothCode</span>: <span class="built_in">string</span>,</span><br><span class="line">      <span class="attr">toothStatus</span>: <span class="title class_">ToothStatus</span></span><br><span class="line">    &#125;**</span><br><span class="line">  **]**</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Q1<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (pregnancyDentalCheckup) &#123;</span><br><span class="line">      **<span class="keyword">const</span> data = pregnancyDentalCheckup.<span class="title function_">map</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> i)**</span><br><span class="line">      <span class="keyword">const</span> sortDateData = data.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span></span><br><span class="line">        b.<span class="property">checkupDate</span>.<span class="title function_">localeCompare</span>(a.<span class="property">checkupDate</span>)</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">const</span> checkUpDateTable = sortDateData?.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">id</span>: item.<span class="property">checkupDate</span>,</span><br><span class="line">        <span class="attr">content</span>:</span><br><span class="line">          item.<span class="property">id</span> === sortDateData[sortDateData.<span class="property">length</span> - <span class="number">1</span>].<span class="property">id</span></span><br><span class="line">            ? viewText.<span class="property">Table</span>.<span class="property">FirstCheckUp</span></span><br><span class="line">            : item.<span class="property">checkupDate</span> + viewText.<span class="property">Table</span>.<span class="property">CheckUp</span>,</span><br><span class="line">      &#125;))</span><br><span class="line">      <span class="title function_">setCheckUpDateTable</span>(checkUpDateTable)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [</span><br><span class="line">    pregnancyDentalCheckup,</span><br><span class="line">    viewText.<span class="property">Table</span>.<span class="property">CheckUp</span>,</span><br><span class="line">    viewText.<span class="property">Table</span>.<span class="property">FirstCheckUp</span>,</span><br><span class="line">  ])</span><br></pre></td></tr></table></figure>
This is a React component that uses the <code>useEffect</code> hook. Within the hook, it checks if there is any data in the <code>pregnancyDentalCheckup</code> array. If there is data, it maps over the array and sorts it by the <code>checkupDate</code> property.<ul>
<li><strong><code>const data = pregnancyDentalCheckup.map((i) =&gt; i)</code></strong><br>You are correct. In the code you provided, <code>data</code> and <code>pregnancyDentalCheckup</code> are both references to the same array object in memory. This is because the <code>map()</code> method does not create a new array object, but rather creates a new array with the same references to the original objects.<br>So any changes made to the objects within the array using one of the variables will be reflected in the other variable as well. If you want to create a new, independent copy of the array, you can use techniques such as the spread operator (<code>...</code>) or the <code>Array.from()</code> method.<br>It then creates a new array of objects called <code>checkUpDateTable</code>, where each object has an <code>id</code> property with the value of the <code>checkupDate</code>, and a <code>content</code> property that is either the string “First CheckUp” or the <code>checkupDate</code> + “ CheckUp” depending on the index of the current record in the sorted array. Finally, it sets the <code>checkUpDateTable</code> state with the newly created array of objects.</li>
</ul>
</li>
<li>Q2<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleClickTable</span> = (<span class="params"><span class="attr">id</span>?: <span class="built_in">string</span></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;handleClickTable( id) @id: &#x27;</span>, id) <span class="comment">// test</span></span><br><span class="line">    <span class="keyword">const</span> data = pregnancyDentalCheckup?.<span class="title function_">find</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> i.<span class="property">checkupDate</span> === id)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;row.id = &#x27;</span>, id)</span><br><span class="line">    <span class="keyword">const</span> toothData = data?.<span class="property">pregnancyDentalCheckupToothStatusUpsertFormList</span></span><br><span class="line">    <span class="comment">// const toothData = dentalCheckupToothStatus?.filter(</span></span><br><span class="line">    <span class="comment">//   (i) =&gt; i.checkupDate === id</span></span><br><span class="line">    <span class="comment">// )</span></span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">&#x27;/record/toothrecorddetail&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">state</span>: &#123; <span class="attr">data</span>: data, <span class="attr">tooth</span>: toothData, <span class="attr">isDetail</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
It seems that the <code>state</code> object is being passed to the <code>navigate</code> method as a property of the <code>location</code> object. To access the <code>state</code> object in the detail page, you need to retrieve it from the <code>location.state</code> object. Make sure that the <code>state</code> object is being passed correctly to the <code>navigate</code> method and that you are retrieving it correctly in the detail page. If the issue persists, you may need to check if there are any other errors or issues in the code that could be causing the problem.</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>growthRecordData</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;成功&quot;</span><span class="punctuation">,</span></span><br><span class="line">  **<span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;childId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test01&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;periodDivision&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;checkedDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023/03/31&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stoolsColorNumber&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">  <span class="punctuation">&#125;</span>**</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">// recordData pass from recorPage =&gt; detailPage</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="comment">// row.id</span></span><br><span class="line">    **<span class="attr">&quot;childId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123456&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;periodDivision&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;checkedDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021/01/01&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;stoolsColorNumber&quot;</span><span class="punctuation">:</span> <span class="number">1</span>**</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>update params —&gt; API</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;childId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test01&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;periodDivision&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;stoolsColorNumber&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;checkedDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023/06/30&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>check if record exists ⇒ boolean</p>
<ul>
<li><p>application of ifExistS []</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> existRecord =</span><br><span class="line">      pregnancyPersonalData &amp;&amp;</span><br><span class="line">      pregnancyPersonalData?.<span class="title function_">find</span>(</span><br><span class="line">        <span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">periodDivision</span> === periodDivision</span><br><span class="line">      )?.<span class="property">existsFlag</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (existRecord) &#123;</span><br><span class="line">      <span class="keyword">const</span> record = <span class="keyword">await</span> <span class="title function_">getSinglePregnancyPersonalData</span>(&#123;</span><br><span class="line">        childId,</span><br><span class="line">        periodDivision,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title function_">navigate</span>(<span class="string">&#x27;/record/momSelfRecordDetail&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">state</span>: &#123;</span><br><span class="line">          record,</span><br><span class="line">          periodDivision,</span><br><span class="line">          <span class="attr">adviceText</span>: <span class="title class_">Advice</span>(periodDivision),</span><br><span class="line">          <span class="attr">title</span>: <span class="title class_">Title</span>(periodDivision),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// no such record =&gt; pass only the record.periodDivision to the editPage</span></span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">&#x27;/record/momSelfRecordEdit&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">periodDivision</span>: periodDivision,</span><br><span class="line">        <span class="attr">adviceText</span>: <span class="title class_">Advice</span>(periodDivision),</span><br><span class="line">        <span class="attr">title</span>: <span class="title class_">Title</span>(periodDivision),</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;成功&quot;</span>,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;childId&quot;</span>: <span class="string">&quot;test01&quot;</span>,</span><br><span class="line">      <span class="string">&quot;periodDivision&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;existsFlag&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;childId&quot;</span>: <span class="string">&quot;test01&quot;</span>,</span><br><span class="line">      <span class="string">&quot;periodDivision&quot;</span>: <span class="number">1</span>,</span><br><span class="line">      **<span class="string">&quot;existsFlag&quot;</span>: <span class="literal">true</span>**</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 電話番号用桁数入力チェック</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value 検証対象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> 検証結果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> isValidPhoneNumberDigits = (</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">string</span> | <span class="literal">undefined</span> | <span class="literal">null</span> | (<span class="built_in">string</span> | <span class="literal">undefined</span> | <span class="literal">null</span>)[]</span><br><span class="line">): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 未入力は検証しない。</span></span><br><span class="line">  <span class="keyword">if</span> (value === <span class="literal">undefined</span> || value === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check if input is a string</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/^\\d&#123;9,11&#125;$/</span>.<span class="title function_">test</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check if input is an array of strings</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    value.<span class="title function_">some</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">isValidPhoneNumberDigits</span>(item) === <span class="literal">false</span>) ===</span><br><span class="line">    <span class="literal">false</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>/^\\\\d&#123;9,11&#125;$/</code> is a regular expression that checks if a string contains only digits and has a length between 9 and 11 characters.</p>
<p>The <code>^</code> and <code>$</code> symbols at the beginning and end of the expression indicate that the entire string should match the pattern. <code>\\\\d</code> matches any digit character, and <code>&#123;9,11&#125;</code> sets the range of acceptable lengths for the string.</p>
<p>The <code>test()</code> method of the regular expression object checks if the provided string matches the pattern, and returns a boolean value indicating whether or not it does.</p>
<p>In this code, the regular expression is used to check if the input string for a phone number is valid. If the input is a string that contains only digits and has a length between 9 and 11 characters, the function returns <code>true</code>. If the input is not a valid phone number, the function returns <code>false</code>.</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AreaInfoProps</span> &#123;</span><br><span class="line">  <span class="comment">// handleClick?: (_: string) =&gt; void</span></span><br><span class="line">  <span class="attr">handleClick</span>?: <span class="function">(<span class="params"><span class="attr">_</span>: <span class="title class_">React</span>.<span class="title class_">MouseEvent</span>&lt;<span class="title class_">HTMLDivElement</span>&gt;</span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  <span class="attr">pageLinks</span>: <span class="title class_">MunicipalityPageLink</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">AreaInfo</span> = (<span class="params"><span class="attr">props</span>: <span class="title class_">AreaInfoProps</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; text &#125; = <span class="title function_">useLocale</span>()</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">TextDivStyle</span> = <span class="title class_">ComponentStyleConstant</span>.<span class="property">Div</span>.<span class="property">TextDiv</span></span><br><span class="line">  <span class="keyword">const</span> viewText = text.<span class="property">pages</span>.<span class="property">ChildcareInformationOfLocalGovernment</span></span><br><span class="line">  <span class="keyword">const</span> &#123; handleClick, pageLinks &#125; = props</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">ListContainer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	      <span class="attr">bottom</span>=<span class="string">&#123;30&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	      <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleClick&#125;&gt;</span></span><br><span class="line"><span class="language-xml">	      <span class="tag">&lt;<span class="name">AreaInfoList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">	        <span class="attr">areaInfoList</span>=<span class="string">&#123;pageLinks.map((pageLink)</span> =&gt;</span> (&#123;</span></span><br><span class="line"><span class="language-xml">	          url: pageLink.textLinkTransitionUrl,</span></span><br><span class="line"><span class="language-xml">	          value: pageLink.textLinkMain,</span></span><br><span class="line"><span class="language-xml">	          labelStyle: &#123;</span></span><br><span class="line"><span class="language-xml">	            size: TextDivStyle.Size.Big,</span></span><br><span class="line"><span class="language-xml">	            justifyContent: TextDivStyle.JustifyContent.FlexStart,</span></span><br><span class="line"><span class="language-xml">	          &#125;,</span></span><br><span class="line"><span class="language-xml">	        &#125;))&#125;</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">ListContainer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	)</span></span><br></pre></td></tr></table></figure>

<p>In the <code>AreaInfo</code> component, you can pass the <code>handleClick</code> function down to the <code>AreaInfoList</code> component as a prop. You can then modify the <code>AreaInfoList</code> component to accept the <code>handleClick</code> prop and pass it to the <code>onClick</code> function of the <code>ListContainer</code> component.</p>
<p>To use <code>handleClick</code> in the <code>AreaInfoList</code> component, you can modify the <code>onClick</code> function of the <code>ListContainer</code> component like this:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ListContainer</span></span><br><span class="line">  bottom=&#123;<span class="number">30</span>&#125;</span><br><span class="line">  onClick=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> handleClick &amp;&amp; <span class="title function_">handleClick</span>(event, areaInfo.<span class="property">url</span>)&#125;&gt; <span class="comment">// Pass the event and the url as arguments to handleClick</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">AreaInfoList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">areaInfoList</span>=<span class="string">&#123;pageLinks.map((pageLink)</span> =&gt;</span> (&#123;</span></span><br><span class="line"><span class="language-xml">      url: pageLink.textLinkTransitionUrl,</span></span><br><span class="line"><span class="language-xml">      value: pageLink.textLinkMain,</span></span><br><span class="line"><span class="language-xml">      labelStyle: &#123;</span></span><br><span class="line"><span class="language-xml">        size: TextDivStyle.Size.Big,</span></span><br><span class="line"><span class="language-xml">        justifyContent: TextDivStyle.JustifyContent.FlexStart,</span></span><br><span class="line"><span class="language-xml">      &#125;,</span></span><br><span class="line"><span class="language-xml">      onClick: () =&gt; handleClick &amp;&amp; handleClick(event, pageLink.textLinkTransitionUrl), // Add an onClick function that calls handleClick with the event and the url</span></span><br><span class="line"><span class="language-xml">    &#125;))&#125;</span></span><br><span class="line"><span class="language-xml">  /&gt;</span></span><br><span class="line">&lt;/<span class="title class_">ListContainer</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="A-event-control"><a href="#A-event-control" class="headerlink" title="A event control"></a>A event control</h3><p>Yes, you can pass an <code>onClick</code> function without a parameter to the child component, and use <code>event.currentTarget</code> to load the parameter within the child component.</p>
<p>Here is an example of how you could modify the <code>AreaInfoList</code> component to handle this:</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">AreaInfoListProps</span> &#123;</span><br><span class="line">  <span class="attr">areaInfoList</span>: <span class="title class_">AreaInfoListItem</span>[]</span><br><span class="line">  **<span class="attr">onClick</span>?: <span class="function">(<span class="params"><span class="attr">_</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>**</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">AreaInfoList</span> = (<span class="params"><span class="attr">props</span>: <span class="title class_">AreaInfoListProps</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; areaInfoList, **onClick** &#125; = props</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleAreaInfoClick</span> = (<span class="params"><span class="attr">event</span>: <span class="title class_">React</span>.<span class="title class_">MouseEvent</span>&lt;<span class="title class_">HTMLDivElement</span>&gt;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> url = event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">url</span></span><br><span class="line">    <span class="keyword">if</span> (url &amp;&amp; onClick) &#123;</span><br><span class="line">      **<span class="title function_">onClick</span>(url)**</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;areaInfoList.map((areaInfo) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">TextDiv</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">key</span>=<span class="string">&#123;areaInfo.value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          **<span class="attr">onClick</span>=<span class="string">&#123;handleAreaInfoClick&#125;**</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">data-url</span>=<span class="string">&#123;areaInfo.url&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;areaInfo.labelStyle&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;areaInfo.value&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">TextDiv</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">lain</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://xlciela.github.io/2023/04/19/React%20cad9fbec03624f47bf073af7c967554e/">http://xlciela.github.io/2023/04/19/React%20cad9fbec03624f47bf073af7c967554e/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/07/21/6VhnoiZTyEzO3qK.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/04/12/TDL-2025/"><img class="prev-cover" data-src="https://i.loli.net/2019/11/24/OTZhpUX9qvEgkn2.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">TDL@2025</div></div></a></div><div class="next-post pull-right"><a href="/2020/07/21/Markdown%20%E8%AF%AD%E6%B3%95%E6%A6%82%E8%A6%81/"><img class="next-cover" data-src="https://i.loli.net/2020/07/21/6VhnoiZTyEzO3qK.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Markdown 语法概要</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'XBs3WMes4VDy3sNOUVKYLzxC-gzGzoHsz',
  appKey: 'P5L3VqcGwHWCt00FNleJLuvI',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'en',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By lain</div><div class="framework-info"><span>Driven </span><a target="_blank" rel="noopener" href="https://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div><div class="footer_custom_text">The brain —— is wider than the sky</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font_plus" title="Increase Font Size"><i class="fas fa-plus"></i></button><button id="font_minus" title="Decrease Font Size"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="Switch Between Traditional Chinese And Simplified Chinese">简</button><button id="darkmode" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src= "/js/myjs.js"></script></body></html>